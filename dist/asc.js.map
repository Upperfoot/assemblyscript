{"version":3,"sources":["webpack://asc/webpack/universalModuleDefinition","webpack://asc/./asc.js","webpack://asc/./shim/fs.js","webpack://asc/./shim/path.js","webpack://asc/./shim/process.js","webpack://asc/./util/colors.js","webpack://asc/./util/find.js","webpack://asc/./util/mkdirp.js","webpack://asc/./util/options.js","webpack://asc/./util/utf8.js","webpack://asc/../lib/loader/umd/index.js","webpack://asc/../lib/rtrace/umd/index.js","webpack://asc/external \"assemblyscript\"","webpack://asc/external \"binaryen\"","webpack://asc/webpack/bootstrap","webpack://asc/webpack/runtime/global","webpack://asc/webpack/runtime/node module decorator","webpack://asc/webpack/startup"],"names":["root","factory","exports","module","require","e","define","amd","self","this","__WEBPACK_EXTERNAL_MODULE__911__","__WEBPACK_EXTERNAL_MODULE__525__","fs","path","process","utf8","colorsUtil","optionsUtil","mkdirp","find","binaryen","g","dynrequire","WIN","platform","EOL","SEP","setupExtension","ext","startsWith","ext_d","re","RegExp","re_d","re_except_d","re_index","defaultExtension","__wrap","ptrOrObj","wrapperClass","wrap","assemblyscript","__newString","__getString","__pin","__unpin","__collect","Object","defineProperty","get","ready","removeAllListeners","wasmArg","argv","findIndex","arg","binaryPath","splice","loader","rtrace","err","info","console","log","getMemory","memory","gcProfile","length","writeFileSync","timestamp","Date","now","JSON","stringify","join","instantiateSync","readFileSync","install","_start","loadAssemblyScriptWasm","register","project","skipIgnore","compilerOptions","target","e_ts","Error","stack","loadAssemblyScriptJS","str","ptr","incremental","loadAssemblyScript","isBundle","version","options","libraryPrefix","LIBRARY_PREFIX","valueOf","defaultOptimizeLevel","defaultShrinkLevel","libraryFiles","libDir","bundled","files","forEach","file","replace","definitionFiles","readDefinition","name","assembly","portable","compileString","sources","output","create","stdout","createMemoryStream","stderr","keys","key","val","opt","type","push","Array","isArray","String","main","concat","readFile","prototype","hasOwnProperty","call","writeFile","contents","listFiles","callback","bundleMinorVersion","bundleMajorVersion","bundlePatchVersion","versionParts","split","parseInt","readFileNode","writeFileNode","listFilesNode","stats","readTime","readCount","writeTime","writeCount","parseTime","parseCount","initializeTime","initializeCount","compileTime","compileCount","emitTime","emitCount","validateTime","validateCount","optimizeTime","optimizeCount","transformTime","transformCount","extension","optionsResult","parse","opts","arguments","noColors","supported","from","unknownOpts","unknown","write","yellow","trailingArgv","trailing","code","red","test","baseDir","normalize","asconfigPath","resolvePath","config","asconfigFile","basename","asconfigDir","dirname","asconfig","getAsconfig","asconfigHasEntries","entries","help","out","color","white","cyan","seenAsconfig","Set","add","targets","targetOptions","merge","generalOptions","entry","extends","has","addDefaults","showConfig","unique","values","program","newOptions","setTarget","setNoAssert","noAssert","setExportMemory","noExportMemory","setImportMemory","importMemory","setInitialMemory","initialMemory","setMaximumMemory","maximumMemory","setSharedMemory","sharedMemory","setImportTable","importTable","setExportTable","exportTable","setExplicitStart","explicitStart","setMemoryBase","memoryBase","setTableBase","tableBase","setSourceMap","sourceMap","setNoUnsafe","noUnsafe","setPedantic","pedantic","setLowMemoryLimit","lowMemoryLimit","setExportRuntime","exportRuntime","setBundleVersion","stackSize","runtime","DEFAULT_STACK_SIZE","setStackSize","use","aliases","i","k","part","p","indexOf","alias","substring","trim","aliasPtr","namePtr","setGlobalAlias","features","disable","flag","toUpperCase","disableFeature","enable","enableFeature","optimizeLevel","shrinkLevel","optimize","Math","min","max","setOptimizeLevelHints","newProgram","transforms","transform","tsNodeRegistered","transformArgs","filename","endsWith","transpileOnly","skipProject","resolve","paths","cwd","map","classOrModule","assign","error","applyTransform","args","transfromTime","measure","libPath","textPtr","pathPtr","customLibDirs","lib","libFiles","j","l","libText","packageMains","Map","packageBases","getFile","internalPath","dependeePath","sourceText","sourcePath","plainName","indexName","match","packageName","isPackageRoot","undefined","filePath","basePath","traceResolution","parts","slice","currentPath","relative","mainPath","jsonPath","jsonText","json","ascMain","set","mainDir","parseBacklog","nextFile","getDependee","numErrors","checkDiagnostics","reportDiagnostic","message","runtimeName","runtimePath","runtimeText","isAbsolute","parser","s","normalizedPath","sort","initializeProgram","crash","compile","original","Module","wrapModule","ref","dispose","noValidate","isValid","validate","trapMode","runPass","debugInfo","debug","converge","runPasses","pass","last","emitBinary","next","noEmit","outFile","textFile","jsFile","binaryFile","hasStdout","hasOutput","tsdFile","idlFile","wasm","sourceMapURL","binary","writeStdout","sourceRoot","index","text","getSource","sourcesContent","wastFormat","emitText","emitStackIR","idl","buildIDL","tsd","buildTSD","js","emitAsmjs","printStats","dirPath","outputFilePath","existsSync","readdirSync","filter","used","toString","isObject","location","ex","include","diagnosticPtr","nextDiagnostic","formatDiagnostic","isTTY","diagnostic","DiagnosticMessage","range","Range","relatedRange","rangeSource","source","Source","relatedRangeSource","category","start","end","isError","createStats","fn","hrtime","times","formatTime","time","toFixed","format","count","len","pad","allocBuffer","Buffer","allocUnsafe","Uint8Array","stream","chunk","buffer","reset","toBuffer","offset","read","stage","BAR","exit","tscOptions","alwaysStrict","noImplicitAny","noImplicitReturns","noImplicitThis","noEmitOnError","strictNullChecks","experimentalDecorators","noLib","types","allowJs","assertPath","TypeError","normalizeStringPosix","allowAboveRoot","res","lastSegmentLength","lastSlash","dots","charCodeAt","lastSlashIndex","lastIndexOf","posix","resolvedPath","resolvedAbsolute","trailingSeparator","joined","to","fromStart","fromEnd","fromLen","toStart","toLen","lastCommonSep","fromCode","_makeLong","hasRoot","matchedSlash","extIdx","firstNonSlashEnd","extname","startDot","startPart","preDotState","pathObject","sep","dir","base","_format","ret","delimiter","win32","umask","previousTimestamp","clocktime","performanceNow","performance","seconds","floor","nanoseconds","mozNow","msNow","oNow","webkitNow","getTime","proc","isCI","env","colors","gray","GRAY","RESET","RED","green","GREEN","YELLOW","blue","BLUE","magenta","MAGENTA","CYAN","WHITE","findFiles","statSync","isDirectory","iname","made","mode","mkdirSync","err0","stat","err1","sanitizeValue","value","Boolean","trunc","Number","v","propagateDefaults","option","default","exec","parseFloat","indent","padding","eol","sbCategories","sbOther","description","sb","noCategories","line","hasCategories","currentOptions","parentOptions","parentBaseDir","mergedOptions","mutuallyExclusive","isPath","useNodeResolution","cliOnly","currentValue","parentValue","exclude","includes","defaultValue","string","c","t","fromCharCode","apply","c1","c2","instantiate","instantiateStreaming","demangle","BIGINT","BigUint64Array","THIS","Symbol","utf16","TextDecoder","fatal","getStringImpl","Uint32Array","wtf16","Uint16Array","decode","off","subarray","preInstantiate","imports","extendedExports","getString","abort","msg","colm","trace","n","seed","F_NOEXPORTRUNTIME","postInstantiate","instance","table","__new","__rtti_base","getRttiCount","arr","getArrayInfo","id","U32","getInfo","getBase","getValueAlign","clz32","getView","alignLog2","signed","float","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","BigInt64Array","__getArrayView","align","buf","getTypedArray","Type","getTypedArrayView","bufPtr","attachTypedArrayFunctions","ctor","bind","U16","__newArray","result","view","__getArray","input","__getArrayBuffer","Uint8ClampedArray","BYTES_PER_ELEMENT","__instanceof","baseId","isResponse","src","Response","isModule","WebAssembly","async","extended","Instance","arrayBuffer","setArgumentsLength","internalName","elem","curr","shift","hash","className","classElem","constructor","thisValue","writable","getOwnPropertyNames","getOwnPropertyDescriptor","getter","setter","enumerable","_default","Rtrace","TOTAL_OVERHEAD","OBJECT_OVERHEAD","BLOCK_OVERHEAD","PTR_VIEW","assert","x","trimStacktrace","levels","stackTraceLimit","mmTagsToString","gcColorToString","onerror","oninfo","oncollect_","oncollect","shadow","shadowStart","blocks","allocSites","freedBlocks","gcProfileStart","allocCount","resizeCount","moveCount","freeCount","heapBase","oninit","onalloc","onresize","onmove","onvisit","onfree","oninterrupt","onyield","onstore","onload","diff","byteLength","grow","Memory","initial","PAGE_SIZE","oldSize","PTR_SIZE","size","errored","isLoad","isRT","syncShadow","mmInfo","gcInfo","gcInfo2","rtId","rtSize","tags","prev","allocStack","getBlockInfo","markShadow","beforeInfo","newSize","unmarkShadow","oldPtr","newPtr","oldInfo","newInfo","freeStack","allocInfo","delete","total","plot","pause","interruptStart","bytes","accessShadow","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","loaded","__webpack_modules__","globalThis","Function","window","nmd","children"],"mappings":"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","file":"asc.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"binaryen\"), (function webpackLoadOptionalExternalModule() { try { return require(\"assemblyscript\"); } catch(e) {} }()));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"binaryen\", \"assemblyscript\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"asc\"] = factory(require(\"binaryen\"), (function webpackLoadOptionalExternalModule() { try { return require(\"assemblyscript\"); } catch(e) {} }()));\n\telse\n\t\troot[\"asc\"] = factory(root[\"binaryen\"], root[\"assemblyscript\"]);\n})(typeof self !== 'undefined' ? self : this, function(__WEBPACK_EXTERNAL_MODULE__911__, __WEBPACK_EXTERNAL_MODULE__525__) {\nreturn ","/**\r\n * @license\r\n * Copyright 2020 Daniel Wirtz / The AssemblyScript Authors.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n *\r\n * SPDX-License-Identifier: Apache-2.0\r\n */\r\n\r\n/**\r\n * @fileoverview Compiler frontend for node.js\r\n *\r\n * Uses the low-level API exported from src/index.ts so it works with the compiler compiled to\r\n * JavaScript as well as the compiler compiled to WebAssembly (eventually). Runs the sources\r\n * directly through ts-node if distribution files are not present.\r\n *\r\n * Can also be packaged as a bundle suitable for in-browser use with the standard library injected\r\n * in the build step. See dist/asc.js for the bundle and webpack.config.js for building details.\r\n */\r\n\r\n/* global BUNDLE_VERSION, BUNDLE_LIBRARY, BUNDLE_DEFINITIONS */\r\n\r\nconst fs = require(\"fs\");\r\nconst path = require(\"path\");\r\nconst process = require(\"process\"); // ensure shim\r\nconst utf8 = require(\"./util/utf8\");\r\nconst colorsUtil = require(\"./util/colors\");\r\nconst optionsUtil = require(\"./util/options\");\r\nconst mkdirp = require(\"./util/mkdirp\");\r\nconst find = require(\"./util/find\");\r\nconst binaryen = global.binaryen || (global.binaryen = require(\"binaryen\"));\r\n\r\nconst dynrequire = typeof __webpack_require__ === \"function\"\r\n  ? __non_webpack_require__\r\n  : require;\r\n\r\nconst WIN = process.platform === \"win32\";\r\nconst EOL = WIN ? \"\\r\\n\" : \"\\n\";\r\nconst SEP = WIN ? \"\\\\\" : \"/\";\r\n\r\n// Sets up an extension with its definition counterpart and relevant regexes.\r\nfunction setupExtension(ext) {\r\n  if (!ext.startsWith(\".\")) ext = \".\" + ext;\r\n  return {\r\n    ext,\r\n    ext_d: \".d\" + ext,\r\n    re: new RegExp(\"\\\\\" + ext + \"$\"),\r\n    re_d: new RegExp(\"\\\\.d\\\\\" + ext + \"$\"),\r\n    re_except_d: new RegExp(\"^(?!.*\\\\.d\\\\\" + ext + \"$).*\\\\\" + ext + \"$\"),\r\n    re_index: new RegExp(\"(?:^|[\\\\\\\\\\\\/])index\\\\\" + ext + \"$\")\r\n  };\r\n}\r\n\r\nconst defaultExtension = setupExtension(\".ts\");\r\n\r\n// Proxy Binaryen's ready event\r\nObject.defineProperty(exports, \"ready\", {\r\n  get() { return binaryen.ready; }\r\n});\r\n\r\n// Emscripten adds an `uncaughtException` listener to Binaryen that results in an additional\r\n// useless code fragment on top of an actual error. suppress this:\r\nif (process.removeAllListeners) process.removeAllListeners(\"uncaughtException\");\r\n\r\n// Use distribution files if present, otherwise run the sources directly.\r\nfunction loadAssemblyScriptJS() {\r\n  var exports;\r\n  try {\r\n    // note that this case will always trigger in recent node.js versions for typical installs\r\n    // see: https://nodejs.org/api/packages.html#packages_self_referencing_a_package_using_its_name\r\n    exports = require(\"assemblyscript\");\r\n  } catch (e) {\r\n    try { // `asc` on the command line (unnecessary in recent node)\r\n      exports = dynrequire(\"../dist/assemblyscript.js\");\r\n    } catch (e) {\r\n      try { // `asc` on the command line without dist files (unnecessary in recent node)\r\n        dynrequire(\"ts-node\").register({\r\n          project: path.join(__dirname, \"..\", \"src\", \"tsconfig.json\"),\r\n          skipIgnore: true,\r\n          compilerOptions: { target: \"ES2016\" }\r\n        });\r\n        dynrequire(\"../src/glue/js\");\r\n        exports = dynrequire(\"../src\");\r\n      } catch (e_ts) {\r\n        try { // `require(\"dist/asc.js\")` in explicit browser tests\r\n          exports = dynrequire(\"./assemblyscript\");\r\n        } catch (e) {\r\n          throw Error(e_ts.stack + \"\\n---\\n\" + e.stack);\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return exports;\r\n}\r\n\r\n// Loads the specified bootstrapped Wasm binary of the compiler.\r\nfunction loadAssemblyScriptWasm(binaryPath) {\r\n  const loader = require(\"../lib/loader/umd/index\");\r\n  const rtrace = new (require(\"../lib/rtrace/umd/index\").Rtrace)({\r\n    onerror(err, info) { console.log(err, info); },\r\n    getMemory() { return exports.memory; },\r\n    oncollect() {\r\n      var gcProfile = rtrace.gcProfile;\r\n      if (gcProfile && gcProfile.length && fs.writeFileSync) {\r\n        let timestamp = Date.now();\r\n        fs.writeFileSync(`rtrace-gc-profile-${timestamp}.json`, JSON.stringify(gcProfile));\r\n        fs.writeFileSync(`rtrace-gc-profile-${timestamp}.csv`, `time,memory,pause\\n${gcProfile.join(\"\\n\")}`);\r\n      }\r\n    }\r\n  });\r\n  var { exports } = loader.instantiateSync(fs.readFileSync(binaryPath), rtrace.install({ binaryen }));\r\n  if (exports._start) exports._start();\r\n  return exports;\r\n}\r\n\r\n/** Ensures that an object is a wrapper class instead of just a pointer. */\r\nfunction __wrap(ptrOrObj, wrapperClass) {\r\n  if (typeof ptrOrObj === \"number\") {\r\n    return ptrOrObj === 0 ? null : wrapperClass.wrap(ptrOrObj);\r\n  }\r\n  return ptrOrObj;\r\n}\r\n\r\nvar assemblyscript, __newString, __getString, __pin, __unpin, __collect;\r\n\r\nfunction loadAssemblyScript() {\r\n  const wasmArg = process.argv.findIndex(arg => arg == \"--wasm\");\r\n  if (~wasmArg) {\r\n    let binaryPath = process.argv[wasmArg + 1];\r\n    process.argv.splice(wasmArg, 2);\r\n    assemblyscript = loadAssemblyScriptWasm(binaryPath);\r\n    __newString = assemblyscript.__newString;\r\n    __getString = assemblyscript.__getString;\r\n    __pin = assemblyscript.__pin;\r\n    __unpin = assemblyscript.__unpin;\r\n    __collect = assemblyscript.__collect;\r\n  } else {\r\n    assemblyscript = loadAssemblyScriptJS();\r\n    __newString = str => str;\r\n    __getString = ptr => ptr;\r\n    __pin = ptr => ptr;\r\n    __unpin = ptr => undefined;\r\n    __collect = incremental => undefined;\r\n  }\r\n}\r\nloadAssemblyScript();\r\n\r\n/** Whether this is a webpack bundle or not. */\r\nexports.isBundle = typeof BUNDLE_VERSION === \"string\";\r\n\r\n/** AssemblyScript version. */\r\nexports.version = exports.isBundle ? BUNDLE_VERSION : dynrequire(\"../package.json\").version;\r\n\r\n/** Available CLI options. */\r\nexports.options = require(\"./asc.json\");\r\n\r\n/** Prefix used for library files. */\r\nexports.libraryPrefix = __getString(assemblyscript.LIBRARY_PREFIX.valueOf());\r\n\r\n/** Default Binaryen optimization level. */\r\nexports.defaultOptimizeLevel = 3;\r\n\r\n/** Default Binaryen shrink level. */\r\nexports.defaultShrinkLevel = 0;\r\n\r\n/** Bundled library files. */\r\nexports.libraryFiles = exports.isBundle ? BUNDLE_LIBRARY : (() => { // set up if not a bundle\r\n  const libDir = path.join(__dirname, \"..\", \"std\", \"assembly\");\r\n  const bundled = {};\r\n  find\r\n    .files(libDir, defaultExtension.re_except_d)\r\n    .forEach(file => {\r\n      bundled[file.replace(defaultExtension.re, \"\")] = fs.readFileSync(path.join(libDir, file), \"utf8\");\r\n    });\r\n  return bundled;\r\n})();\r\n\r\n/** Bundled definition files. */\r\nexports.definitionFiles = exports.isBundle ? BUNDLE_DEFINITIONS : (() => { // set up if not a bundle\r\n  const readDefinition = name => fs.readFileSync(\r\n    path.join(__dirname, \"..\", \"std\", name, \"index\" + defaultExtension.ext_d),\r\n    \"utf8\"\r\n  );\r\n  return {\r\n    assembly: readDefinition(\"assembly\"),\r\n    portable: readDefinition(\"portable\")\r\n  };\r\n})();\r\n\r\n/** Convenience function that parses and compiles source strings directly. */\r\nexports.compileString = (sources, options) => {\r\n  if (typeof sources === \"string\") sources = { [\"input\" + defaultExtension.ext]: sources };\r\n  const output = Object.create({\r\n    stdout: createMemoryStream(),\r\n    stderr: createMemoryStream()\r\n  });\r\n  var argv = [\r\n    \"--binaryFile\", \"binary\",\r\n    \"--textFile\", \"text\",\r\n  ];\r\n  Object.keys(options || {}).forEach(key => {\r\n    var val = options[key];\r\n    var opt = exports.options[key];\r\n    if (opt && opt.type === \"b\") {\r\n      if (val) argv.push(\"--\" + key);\r\n    } else {\r\n      if (Array.isArray(val)) {\r\n        val.forEach(val => { argv.push(\"--\" + key, String(val)); });\r\n      }\r\n      else argv.push(\"--\" + key, String(val));\r\n    }\r\n  });\r\n  exports.main(argv.concat(Object.keys(sources)), {\r\n    stdout: output.stdout,\r\n    stderr: output.stderr,\r\n    readFile: name => Object.prototype.hasOwnProperty.call(sources, name) ? sources[name] : null,\r\n    writeFile: (name, contents) => { output[name] = contents; },\r\n    listFiles: () => []\r\n  });\r\n  return output;\r\n};\r\n\r\n/** Runs the command line utility using the specified arguments array. */\r\nexports.main = function main(argv, options, callback) {\r\n  if (typeof options === \"function\") {\r\n    callback = options;\r\n    options = {};\r\n  } else if (!options) {\r\n    options = {};\r\n  }\r\n\r\n  // Bundle semantic version\r\n  let bundleMinorVersion = 0, bundleMajorVersion = 0, bundlePatchVersion = 0;\r\n  const versionParts = (exports.version || \"\").split(\".\");\r\n  if (versionParts.length === 3) {\r\n    bundleMajorVersion = parseInt(versionParts[0]) | 0;\r\n    bundleMinorVersion = parseInt(versionParts[1]) | 0;\r\n    bundlePatchVersion = parseInt(versionParts[2]) | 0;\r\n  }\r\n\r\n  const stdout = options.stdout || process.stdout;\r\n  const stderr = options.stderr || process.stderr;\r\n  const readFile = options.readFile || readFileNode;\r\n  const writeFile = options.writeFile || writeFileNode;\r\n  const listFiles = options.listFiles || listFilesNode;\r\n  const stats = options.stats || createStats();\r\n  let extension = defaultExtension;\r\n\r\n  // Output must be specified if not present in the environment\r\n  if (!stdout) throw Error(\"'options.stdout' must be specified\");\r\n  if (!stderr) throw Error(\"'options.stderr' must be specified\");\r\n\r\n  // Parse command line options but do not populate option defaults yet\r\n  const optionsResult = optionsUtil.parse(argv, exports.options, false);\r\n  let opts = optionsResult.options;\r\n  argv = optionsResult.arguments;\r\n\r\n  if (opts.noColors) {\r\n    colorsUtil.stdout.supported =\r\n    colorsUtil.stderr.supported = false;\r\n  } else {\r\n    colorsUtil.stdout = colorsUtil.from(stdout);\r\n    colorsUtil.stderr = colorsUtil.from(stderr);\r\n  }\r\n\r\n  // Check for unknown options\r\n  const unknownOpts = optionsResult.unknown;\r\n  if (unknownOpts.length) {\r\n    unknownOpts.forEach(arg => {\r\n      stderr.write(colorsUtil.stderr.yellow(\"WARNING \") + \"Unknown option '\" + arg + \"'\" + EOL);\r\n    });\r\n  }\r\n\r\n  // Check for trailing arguments\r\n  const trailingArgv = optionsResult.trailing;\r\n  if (trailingArgv.length) {\r\n    stderr.write(colorsUtil.stderr.yellow(\"WARNING \") + \"Unsupported trailing arguments: \" + trailingArgv.join(\" \") + EOL);\r\n  }\r\n\r\n  // Use default callback if none is provided\r\n  if (!callback) callback = function defaultCallback(err) {\r\n    var code = 0;\r\n    if (err) {\r\n      stderr.write(colorsUtil.stderr.red(\"FAILURE \") + err.stack.replace(/^ERROR: /i, \"\") + EOL);\r\n      code = 1;\r\n    }\r\n    return code;\r\n  };\r\n\r\n  // Just print the version if requested\r\n  if (opts.version) {\r\n    stdout.write(\"Version \" + exports.version + EOL);\r\n    return callback(null);\r\n  }\r\n\r\n  // Use another extension if requested\r\n  if (typeof opts.extension === \"string\") {\r\n    if (/^\\.?[0-9a-zA-Z]{1,14}$/.test(opts.extension)) {\r\n      extension = setupExtension(opts.extension);\r\n    } else {\r\n      return callback(Error(\"Invalid extension: \" + opts.extension));\r\n    }\r\n  }\r\n\r\n  // Set up base directory\r\n  const baseDir = path.normalize(opts.baseDir || \".\");\r\n\r\n  // Check if a config file is present\r\n  let asconfigPath = optionsUtil.resolvePath(opts.config || \"asconfig.json\", baseDir);\r\n  let asconfigFile = path.basename(asconfigPath);\r\n  let asconfigDir = path.dirname(asconfigPath);\r\n  let asconfig = getAsconfig(asconfigFile, asconfigDir, readFile);\r\n  let asconfigHasEntries = asconfig != null && Array.isArray(asconfig.entries) && asconfig.entries.length;\r\n\r\n  // Print the help message if requested or no source files are provided\r\n  if (opts.help || (!argv.length && !asconfigHasEntries)) {\r\n    var out = opts.help ? stdout : stderr;\r\n    var color = opts.help ? colorsUtil.stdout : colorsUtil.stderr;\r\n    out.write([\r\n      color.white(\"SYNTAX\"),\r\n      \"  \" + color.cyan(\"asc\") + \" [entryFile ...] [options]\",\r\n      \"\",\r\n      color.white(\"EXAMPLES\"),\r\n      \"  \" + color.cyan(\"asc\") + \" hello\" + extension.ext,\r\n      \"  \" + color.cyan(\"asc\") + \" hello\" + extension.ext + \" -b hello.wasm -t hello.wat\",\r\n      \"  \" + color.cyan(\"asc\") + \" hello1\" + extension.ext + \" hello2\" + extension.ext + \" -b -O > hello.wasm\",\r\n      \"  \" + color.cyan(\"asc\") + \" --config asconfig.json --target release\",\r\n      \"\",\r\n      color.white(\"OPTIONS\"),\r\n    ].concat(\r\n      optionsUtil.help(exports.options, 24, EOL)\r\n    ).join(EOL) + EOL);\r\n    return callback(null);\r\n  }\r\n\r\n  // I/O must be specified if not present in the environment\r\n  if (!fs.readFileSync) {\r\n    if (readFile === readFileNode) throw Error(\"'options.readFile' must be specified\");\r\n    if (writeFile === writeFileNode) throw Error(\"'options.writeFile' must be specified\");\r\n    if (listFiles === listFilesNode) throw Error(\"'options.listFiles' must be specified\");\r\n  }\r\n\r\n  // Load additional options from asconfig.json\r\n  const seenAsconfig = new Set();\r\n  seenAsconfig.add(asconfigPath);\r\n  const target = opts.target || \"release\";\r\n  while (asconfig) {\r\n    // Merge target first\r\n    if (asconfig.targets) {\r\n      const targetOptions = asconfig.targets[target];\r\n      if (targetOptions) {\r\n        opts = optionsUtil.merge(exports.options, opts, targetOptions, asconfigDir);\r\n      }\r\n    }\r\n    // Merge general options\r\n    const generalOptions = asconfig.options;\r\n    if (generalOptions) {\r\n      opts = optionsUtil.merge(exports.options, opts, generalOptions, asconfigDir);\r\n    }\r\n\r\n    // Append entries\r\n    if (asconfig.entries) {\r\n      for (let entry of asconfig.entries) {\r\n        argv.push(optionsUtil.resolvePath(entry, asconfigDir));\r\n      }\r\n    }\r\n\r\n    // Look up extended asconfig and repeat\r\n    if (asconfig.extends) {\r\n      asconfigPath = optionsUtil.resolvePath(asconfig.extends, asconfigDir, true);\r\n      asconfigFile = path.basename(asconfigPath);\r\n      asconfigDir = path.dirname(asconfigPath);\r\n      if (seenAsconfig.has(asconfigPath)) break;\r\n      seenAsconfig.add(asconfigPath);\r\n      asconfig = getAsconfig(asconfigFile, asconfigDir, readFile);\r\n    } else {\r\n      break;\r\n    }\r\n  }\r\n\r\n  // Populate option defaults once user-defined options are set\r\n  optionsUtil.addDefaults(exports.options, opts);\r\n\r\n  // If showConfig print options and exit\r\n  if (opts.showConfig) {\r\n    stderr.write(JSON.stringify({\r\n      options: opts,\r\n      entries: argv\r\n    }, null, 2));\r\n    return callback(null);\r\n  }\r\n\r\n  // create a unique set of values\r\n  function unique(values) {\r\n    return [...new Set(values)];\r\n  }\r\n\r\n  // Set up options\r\n  var program;\r\n  const compilerOptions = __pin(assemblyscript.newOptions());\r\n  assemblyscript.setTarget(compilerOptions, 0);\r\n  assemblyscript.setNoAssert(compilerOptions, opts.noAssert);\r\n  assemblyscript.setExportMemory(compilerOptions, !opts.noExportMemory);\r\n  assemblyscript.setImportMemory(compilerOptions, opts.importMemory);\r\n  assemblyscript.setInitialMemory(compilerOptions, opts.initialMemory >>> 0);\r\n  assemblyscript.setMaximumMemory(compilerOptions, opts.maximumMemory >>> 0);\r\n  assemblyscript.setSharedMemory(compilerOptions, opts.sharedMemory);\r\n  assemblyscript.setImportTable(compilerOptions, opts.importTable);\r\n  assemblyscript.setExportTable(compilerOptions, opts.exportTable);\r\n  assemblyscript.setExplicitStart(compilerOptions, opts.explicitStart);\r\n  assemblyscript.setMemoryBase(compilerOptions, opts.memoryBase >>> 0);\r\n  assemblyscript.setTableBase(compilerOptions, opts.tableBase >>> 0);\r\n  assemblyscript.setSourceMap(compilerOptions, opts.sourceMap != null);\r\n  assemblyscript.setNoUnsafe(compilerOptions, opts.noUnsafe);\r\n  assemblyscript.setPedantic(compilerOptions, opts.pedantic);\r\n  assemblyscript.setLowMemoryLimit(compilerOptions, opts.lowMemoryLimit >>> 0);\r\n  assemblyscript.setExportRuntime(compilerOptions, opts.exportRuntime);\r\n  assemblyscript.setBundleVersion(compilerOptions, bundleMajorVersion, bundleMinorVersion, bundlePatchVersion);\r\n  if (!opts.stackSize && opts.runtime == \"incremental\") {\r\n    opts.stackSize = assemblyscript.DEFAULT_STACK_SIZE;\r\n  }\r\n  assemblyscript.setStackSize(compilerOptions, opts.stackSize);\r\n\r\n  // Instrument callback to perform GC\r\n  callback = (function(callback) {\r\n    return function wrappedCallback(err) {\r\n      __unpin(compilerOptions);\r\n      if (program) __unpin(program);\r\n      __collect();\r\n      return callback(err);\r\n    };\r\n  })(callback);\r\n\r\n  // Add or override aliases if specified\r\n  if (opts.use) {\r\n    let aliases = opts.use;\r\n    for (let i = 0, k = aliases.length; i < k; ++i) {\r\n      let part = aliases[i];\r\n      let p = part.indexOf(\"=\");\r\n      if (p < 0) return callback(Error(\"Global alias '\" + part + \"' is invalid.\"));\r\n      let alias = part.substring(0, p).trim();\r\n      let name = part.substring(p + 1).trim();\r\n      if (!alias.length) return callback(Error(\"Global alias '\" + part + \"' is invalid.\"));\r\n      {\r\n        let aliasPtr = __pin(__newString(alias));\r\n        let namePtr = __newString(name);\r\n        assemblyscript.setGlobalAlias(compilerOptions, aliasPtr, namePtr);\r\n        __unpin(aliasPtr);\r\n      }\r\n    }\r\n  }\r\n\r\n  // Disable default features if specified\r\n  var features;\r\n  if ((features = opts.disable) != null) {\r\n    if (typeof features === \"string\") features = features.split(\",\");\r\n    for (let i = 0, k = features.length; i < k; ++i) {\r\n      let name = features[i].trim();\r\n      let flag = assemblyscript[\"FEATURE_\" + name.replace(/-/g, \"_\").toUpperCase()];\r\n      if (!flag) return callback(Error(\"Feature '\" + name + \"' is unknown.\"));\r\n      assemblyscript.disableFeature(compilerOptions, flag);\r\n    }\r\n  }\r\n\r\n  // Enable experimental features if specified\r\n  if ((features = opts.enable) != null) {\r\n    if (typeof features === \"string\") features = features.split(\",\");\r\n    for (let i = 0, k = features.length; i < k; ++i) {\r\n      let name = features[i].trim();\r\n      let flag = assemblyscript[\"FEATURE_\" + name.replace(/-/g, \"_\").toUpperCase()];\r\n      if (!flag) return callback(Error(\"Feature '\" + name + \"' is unknown.\"));\r\n      assemblyscript.enableFeature(compilerOptions, flag);\r\n    }\r\n  }\r\n\r\n  // Set up optimization levels\r\n  var optimizeLevel = 0;\r\n  var shrinkLevel = 0;\r\n  if (opts.optimize) {\r\n    optimizeLevel = exports.defaultOptimizeLevel;\r\n    shrinkLevel = exports.defaultShrinkLevel;\r\n  }\r\n  if (typeof opts.optimizeLevel === \"number\") optimizeLevel = opts.optimizeLevel;\r\n  if (typeof opts.shrinkLevel === \"number\") shrinkLevel = opts.shrinkLevel;\r\n  optimizeLevel = Math.min(Math.max(optimizeLevel, 0), 3);\r\n  shrinkLevel = Math.min(Math.max(shrinkLevel, 0), 2);\r\n  assemblyscript.setOptimizeLevelHints(compilerOptions, optimizeLevel, shrinkLevel);\r\n\r\n  // Initialize the program\r\n  program = __pin(assemblyscript.newProgram(compilerOptions));\r\n\r\n  // Collect transforms *constructors* from the `--transform` CLI flag as well\r\n  // as the `transform` option into the `transforms` array.\r\n  let transforms = [];\r\n  // `transform` option from `main()`\r\n  if (Array.isArray(options.transforms)) {\r\n    transforms.push(...options.transforms);\r\n  }\r\n  // `--transform` CLI flag\r\n  if (opts.transform) {\r\n    let tsNodeRegistered = false;\r\n    let transformArgs = unique(opts.transform);\r\n    for (let i = 0, k = transformArgs.length; i < k; ++i) {\r\n      let filename = transformArgs[i].trim();\r\n      if (!tsNodeRegistered && filename.endsWith(\".ts\")) { // ts-node requires .ts specifically\r\n        dynrequire(\"ts-node\").register({ transpileOnly: true, skipProject: true, compilerOptions: { target: \"ES2016\" } });\r\n        tsNodeRegistered = true;\r\n      }\r\n      try {\r\n        transforms.push(dynrequire(dynrequire.resolve(filename, { paths: [baseDir, process.cwd()] })));\r\n      } catch (e) {\r\n        return callback(e);\r\n      }\r\n    }\r\n  }\r\n\r\n  // Fix up the prototype of the transforms constructors and instantiate them.\r\n  try {\r\n    transforms = transforms.map(classOrModule => {\r\n      // Except if its a legacy module, just pass it through.\r\n      if (typeof classOrModule !== \"function\") {\r\n        return classOrModule; \r\n      }\r\n      Object.assign(classOrModule.prototype, {\r\n        program,\r\n        baseDir,\r\n        stdout,\r\n        stderr,\r\n        log: console.error,\r\n        readFile,\r\n        writeFile,\r\n        listFiles\r\n      });\r\n      return new classOrModule();\r\n    });\r\n  } catch (e) {\r\n    return callback(e);\r\n  }\r\n\r\n  function applyTransform(name, ...args) {\r\n    for (let i = 0, k = transforms.length; i < k; ++i) {\r\n      let transform = transforms[i];\r\n      if (typeof transform[name] === \"function\") {\r\n        try {\r\n          stats.transformCount++;\r\n          stats.transfromTime += measure(() => {\r\n            transform[name](...args);\r\n          });\r\n        } catch (e) {\r\n          return e;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // Parse library files\r\n  Object.keys(exports.libraryFiles).forEach(libPath => {\r\n    if (libPath.indexOf(\"/\") >= 0) return; // in sub-directory: imported on demand\r\n    stats.parseCount++;\r\n    stats.parseTime += measure(() => {\r\n      let textPtr = __pin(__newString(exports.libraryFiles[libPath]));\r\n      let pathPtr = __newString(exports.libraryPrefix + libPath + extension.ext);\r\n      assemblyscript.parse(program, textPtr, pathPtr, false);\r\n      __unpin(textPtr);\r\n    });\r\n  });\r\n  let customLibDirs = [];\r\n  if (opts.lib) {\r\n    let lib = opts.lib;\r\n    if (typeof lib === \"string\") lib = lib.split(\",\");\r\n    customLibDirs.push(...lib.map(p => p.trim()));\r\n    customLibDirs = unique(customLibDirs); // `lib` and `customLibDirs` may include duplicates\r\n    for (let i = 0, k = customLibDirs.length; i < k; ++i) { // custom\r\n      let libDir = customLibDirs[i];\r\n      let libFiles;\r\n      if (libDir.endsWith(extension.ext)) {\r\n        libFiles = [ path.basename(libDir) ];\r\n        libDir = path.dirname(libDir);\r\n      } else {\r\n        libFiles = listFiles(libDir, baseDir) || [];\r\n      }\r\n      for (let j = 0, l = libFiles.length; j < l; ++j) {\r\n        let libPath = libFiles[j];\r\n        let libText = readFile(libPath, libDir);\r\n        if (libText === null) return callback(Error(\"Library file '\" + libPath + \"' not found.\"));\r\n        stats.parseCount++;\r\n        exports.libraryFiles[libPath.replace(extension.re, \"\")] = libText;\r\n        stats.parseTime += measure(() => {\r\n          let textPtr = __pin(__newString(libText));\r\n          let pathPtr = __newString(exports.libraryPrefix + libPath);\r\n          assemblyscript.parse(program, textPtr, pathPtr, false);\r\n          __unpin(textPtr);\r\n        });\r\n      }\r\n    }\r\n  }\r\n  opts.path = opts.path || [];\r\n\r\n  // Maps package names to parent directory\r\n  var packageMains = new Map();\r\n  var packageBases = new Map();\r\n\r\n  // Gets the file matching the specified source path, imported at the given dependee path\r\n  function getFile(internalPath, dependeePath) {\r\n    var sourceText = null; // text reported back to the compiler\r\n    var sourcePath = null; // path reported back to the compiler\r\n\r\n    const libraryPrefix = exports.libraryPrefix;\r\n    const libraryFiles = exports.libraryFiles;\r\n\r\n    // Try file.ext, file/index.ext, file.d.ext\r\n    if (!internalPath.startsWith(libraryPrefix)) {\r\n      if ((sourceText = readFile(sourcePath = internalPath + extension.ext, baseDir)) == null) {\r\n        if ((sourceText = readFile(sourcePath = internalPath + \"/index\" + extension.ext, baseDir)) == null) {\r\n          // portable d.ext: uses the .js file next to it in JS or becomes an import in Wasm\r\n          sourcePath = internalPath + extension.ext;\r\n          sourceText = readFile(internalPath + extension.ext_d, baseDir);\r\n        }\r\n      }\r\n\r\n    // Search library in this order: stdlib, custom lib dirs, paths\r\n    } else {\r\n      const plainName = internalPath.substring(libraryPrefix.length);\r\n      const indexName = plainName + \"/index\";\r\n      if (Object.prototype.hasOwnProperty.call(libraryFiles, plainName)) {\r\n        sourceText = libraryFiles[plainName];\r\n        sourcePath = libraryPrefix + plainName + extension.ext;\r\n      } else if (Object.prototype.hasOwnProperty.call(libraryFiles, indexName)) {\r\n        sourceText = libraryFiles[indexName];\r\n        sourcePath = libraryPrefix + indexName + extension.ext;\r\n      } else { // custom lib dirs\r\n        for (const libDir of customLibDirs) {\r\n          if ((sourceText = readFile(plainName + extension.ext, libDir)) != null) {\r\n            sourcePath = libraryPrefix + plainName + extension.ext;\r\n            break;\r\n          } else {\r\n            if ((sourceText = readFile(indexName + extension.ext, libDir)) != null) {\r\n              sourcePath = libraryPrefix + indexName + extension.ext;\r\n              break;\r\n            }\r\n          }\r\n        }\r\n        if (sourceText == null) { // paths\r\n          const match = internalPath.match(/^~lib\\/((?:@[^/]+\\/)?[^/]+)(?:\\/(.+))?/); // ~lib/(pkg)/(path), ~lib/(@org/pkg)/(path)\r\n          if (match) {\r\n            const packageName = match[1];\r\n            const isPackageRoot = match[2] === undefined;\r\n            const filePath = isPackageRoot ? \"index\" : match[2];\r\n            const basePath = packageBases.has(dependeePath) ? packageBases.get(dependeePath) : \".\";\r\n            if (opts.traceResolution) stderr.write(\"Looking for package '\" + packageName + \"' file '\" + filePath + \"' relative to '\" + basePath + \"'\" + EOL);\r\n            const paths = [];\r\n            const parts = path.resolve(baseDir, basePath).split(SEP);\r\n            for (let i = parts.length, k = WIN ? 1 : 0; i >= k; --i) {\r\n              if (parts[i - 1] !== \"node_modules\") paths.push(parts.slice(0, i).join(SEP) + SEP + \"node_modules\");\r\n            }\r\n            for (const currentPath of paths.concat(...opts.path).map(p => path.relative(baseDir, p))) {\r\n              if (opts.traceResolution) stderr.write(\"  in \" + path.join(currentPath, packageName) + EOL);\r\n              let mainPath = \"assembly\";\r\n              if (packageMains.has(packageName)) { // use cached\r\n                mainPath = packageMains.get(packageName);\r\n              } else { // evaluate package.json\r\n                let jsonPath = path.join(currentPath, packageName, \"package.json\");\r\n                let jsonText = readFile(jsonPath, baseDir);\r\n                if (jsonText != null) {\r\n                  try {\r\n                    let json = JSON.parse(jsonText);\r\n                    if (typeof json.ascMain === \"string\") {\r\n                      mainPath = json.ascMain.replace(extension.re_index, \"\");\r\n                      packageMains.set(packageName, mainPath);\r\n                    }\r\n                  } catch (e) { /* nop */ }\r\n                }\r\n              }\r\n              const mainDir = path.join(currentPath, packageName, mainPath);\r\n              const plainName = filePath;\r\n              if ((sourceText = readFile(path.join(mainDir, plainName + extension.ext), baseDir)) != null) {\r\n                sourcePath = libraryPrefix + packageName + \"/\" + plainName + extension.ext;\r\n                packageBases.set(sourcePath.replace(extension.re, \"\"), path.join(currentPath, packageName));\r\n                if (opts.traceResolution) stderr.write(\"  -> \" + path.join(mainDir, plainName + extension.ext) + EOL);\r\n                break;\r\n              } else if (!isPackageRoot) {\r\n                const indexName = filePath + \"/index\";\r\n                if ((sourceText = readFile(path.join(mainDir, indexName + extension.ext), baseDir)) !== null) {\r\n                  sourcePath = libraryPrefix + packageName + \"/\" + indexName + extension.ext;\r\n                  packageBases.set(sourcePath.replace(extension.re, \"\"), path.join(currentPath, packageName));\r\n                  if (opts.traceResolution) stderr.write(\"  -> \" + path.join(mainDir, indexName + extension.ext) + EOL);\r\n                  break;\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    // No such file\r\n    if (sourceText == null) return null;\r\n    return { sourceText, sourcePath };\r\n  }\r\n\r\n  // Parses the backlog of imported files after including entry files\r\n  function parseBacklog() {\r\n    var internalPath;\r\n    while ((internalPath = __getString(assemblyscript.nextFile(program)))) {\r\n      let file = getFile(internalPath, assemblyscript.getDependee(program, internalPath));\r\n      if (file) {\r\n        stats.parseCount++;\r\n        stats.parseTime += measure(() => {\r\n          let textPtr = __pin(__newString(file.sourceText));\r\n          let pathPtr = __newString(file.sourcePath);\r\n          assemblyscript.parse(program, textPtr, pathPtr, false);\r\n          __unpin(textPtr);\r\n        });\r\n      } else {\r\n        stats.parseTime += measure(() => {\r\n          let textPtr = __newString(null); // no need to pin\r\n          let pathPtr = __newString(internalPath + extension.ext);\r\n          assemblyscript.parse(program, textPtr, pathPtr, false);\r\n        });\r\n      }\r\n    }\r\n    var numErrors = checkDiagnostics(program, stderr, options.reportDiagnostic);\r\n    if (numErrors) {\r\n      const err = Error(numErrors + \" parse error(s)\");\r\n      err.stack = err.message; // omit stack\r\n      return callback(err);\r\n    }\r\n  }\r\n\r\n  // Include runtime before entry files so its setup runs first\r\n  {\r\n    let runtimeName = String(opts.runtime);\r\n    let runtimePath = \"rt/index-\" + runtimeName;\r\n    let runtimeText = exports.libraryFiles[runtimePath];\r\n    if (runtimeText == null) {\r\n      runtimePath = runtimeName;\r\n      runtimeText = readFile(runtimePath + extension.ext, baseDir);\r\n      if (runtimeText == null) return callback(Error(`Runtime '${runtimeName}' not found.`));\r\n    } else {\r\n      runtimePath = \"~lib/\" + runtimePath;\r\n    }\r\n    stats.parseCount++;\r\n    stats.parseTime += measure(() => {\r\n      let textPtr = __pin(__newString(runtimeText));\r\n      let pathPtr = __newString(runtimePath + extension.ext);\r\n      assemblyscript.parse(program, textPtr, pathPtr, true);\r\n      __unpin(textPtr);\r\n    });\r\n  }\r\n\r\n  // Include entry files\r\n  for (let i = 0, k = argv.length; i < k; ++i) {\r\n    const filename = argv[i];\r\n\r\n    let sourcePath = String(filename).replace(/\\\\/g, \"/\").replace(extension.re, \"\").replace(/[\\\\/]$/, \"\");\r\n\r\n    // Setting the path to relative path\r\n    sourcePath = path.isAbsolute(sourcePath) ? path.relative(baseDir, sourcePath).replace(/\\\\/g, \"/\") : sourcePath;\r\n\r\n    // Try entryPath.ext, then entryPath/index.ext\r\n    let sourceText = readFile(sourcePath + extension.ext, baseDir);\r\n    if (sourceText == null) {\r\n      sourceText = readFile(sourcePath + \"/index\" + extension.ext, baseDir);\r\n      if (sourceText != null) sourcePath += \"/index\" + extension.ext;\r\n      else sourcePath += extension.ext;\r\n    } else {\r\n      sourcePath += extension.ext;\r\n    }\r\n\r\n    stats.parseCount++;\r\n    stats.parseTime += measure(() => {\r\n      let textPtr = __pin(__newString(sourceText));\r\n      let pathPtr = __newString(sourcePath);\r\n      assemblyscript.parse(program, textPtr, pathPtr, true);\r\n      __unpin(textPtr);\r\n    });\r\n  }\r\n\r\n  // Parse entry files\r\n  {\r\n    let code = parseBacklog();\r\n    if (code) return code;\r\n  }\r\n\r\n  // Call afterParse transform hook\r\n  {\r\n    let error = applyTransform(\"afterParse\", program.parser);\r\n    if (error) return callback(error);\r\n  }\r\n\r\n  // Parse additional files, if any\r\n  {\r\n    let code = parseBacklog();\r\n    if (code) return code;\r\n  }\r\n\r\n  // Print files and exit if listFiles\r\n  if (opts.listFiles) {\r\n    // FIXME: not a proper C-like API\r\n    stderr.write(program.sources.map(s => s.normalizedPath).sort().join(EOL) + EOL);\r\n    return callback(null);\r\n  }\r\n\r\n  // Pre-emptively initialize the program\r\n  stats.initializeCount++;\r\n  stats.initializeTime += measure(() => {\r\n    try {\r\n      assemblyscript.initializeProgram(program);\r\n    } catch (e) {\r\n      crash(\"initialize\", e);\r\n    }\r\n  });\r\n\r\n  // Call afterInitialize transform hook\r\n  {\r\n    let error = applyTransform(\"afterInitialize\", program);\r\n    if (error) return callback(error);\r\n  }\r\n\r\n  var module;\r\n  stats.compileCount++;\r\n  stats.compileTime += measure(() => {\r\n    try {\r\n      module = assemblyscript.compile(program);\r\n    } catch (e) {\r\n      crash(\"compile\", e);\r\n    }\r\n    // From here on we are going to use Binaryen.js, except that we keep pass\r\n    // order as defined in the compiler.\r\n    if (typeof module === \"number\") { // Wasm\r\n      const original = assemblyscript.Module.wrap(module);\r\n      module = binaryen.wrapModule(original.ref);\r\n      module.optimize = function(...args) {\r\n        original.optimize(...args);\r\n      };\r\n    } else { // JS\r\n      const original = module;\r\n      module = binaryen.wrapModule(module.ref);\r\n      module.optimize = function(...args) {\r\n        original.optimize(...args);\r\n      };\r\n    }\r\n  });\r\n  var numErrors = checkDiagnostics(program, stderr, options.reportDiagnostic);\r\n  if (numErrors) {\r\n    if (module) module.dispose();\r\n    const err = Error(numErrors + \" compile error(s)\");\r\n    err.stack = err.message; // omit stack\r\n    return callback(err);\r\n  }\r\n\r\n  // Call afterCompile transform hook\r\n  {\r\n    let error = applyTransform(\"afterCompile\", module);\r\n    if (error) return callback(error);\r\n  }\r\n\r\n  // Validate the module if requested\r\n  if (!opts.noValidate) {\r\n    stats.validateCount++;\r\n    let isValid;\r\n    stats.validateTime += measure(() => {\r\n      isValid = module.validate();\r\n    });\r\n    if (!isValid) {\r\n      module.dispose();\r\n      return callback(Error(\"validate error\"));\r\n    }\r\n  }\r\n\r\n  // Set Binaryen-specific options\r\n  if (opts.trapMode === \"clamp\") {\r\n    stats.optimizeCount++;\r\n    stats.optimizeTime += measure(() => {\r\n      module.runPass(\"trap-mode-clamp\");\r\n    });\r\n  } else if (opts.trapMode === \"js\") {\r\n    stats.optimizeCount++;\r\n    stats.optimizeTime += measure(() => {\r\n      module.runPass(\"trap-mode-js\");\r\n    });\r\n  } else if (opts.trapMode !== \"allow\") {\r\n    module.dispose();\r\n    return callback(Error(\"Unsupported trap mode\"));\r\n  }\r\n\r\n  // Optimize the module\r\n  const debugInfo = opts.debug;\r\n  const converge = opts.converge;\r\n  const runPasses = [];\r\n  if (opts.runPasses) {\r\n    if (typeof opts.runPasses === \"string\") {\r\n      opts.runPasses = opts.runPasses.split(\",\");\r\n    }\r\n    if (opts.runPasses.length) {\r\n      opts.runPasses.forEach(pass => {\r\n        if (runPasses.indexOf(pass = pass.trim()) < 0) {\r\n          runPasses.push(pass);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  stats.optimizeTime += measure(() => {\r\n    stats.optimizeCount++;\r\n    try {\r\n      module.optimize(optimizeLevel, shrinkLevel, debugInfo);\r\n    } catch (e) {\r\n      crash(\"optimize\", e);\r\n    }\r\n    try {\r\n      module.runPasses(runPasses);\r\n    } catch (e) {\r\n      crash(\"runPasses\", e);\r\n    }\r\n    if (converge) {\r\n      let last;\r\n      try {\r\n        last = module.emitBinary();\r\n      } catch (e) {\r\n        crash(\"emitBinary (converge)\", e);\r\n      }\r\n      do {\r\n        stats.optimizeCount++;\r\n        try {\r\n          module.optimize(optimizeLevel, shrinkLevel, debugInfo);\r\n        } catch (e) {\r\n          crash(\"optimize (converge)\", e);\r\n        }\r\n        try {\r\n          module.runPasses(runPasses);\r\n        } catch (e) {\r\n          crash(\"runPasses (converge)\", e);\r\n        }\r\n        let next;\r\n        try {\r\n          next = module.emitBinary();\r\n        } catch (e) {\r\n          crash(\"emitBinary (converge)\", e);\r\n        }\r\n        if (next.length >= last.length) {\r\n          if (next.length > last.length) {\r\n            stderr.write(\"Last converge was suboptimial.\" + EOL);\r\n          }\r\n          break;\r\n        }\r\n        last = next;\r\n      } while (true);\r\n    }\r\n  });\r\n\r\n  // Prepare output\r\n  if (!opts.noEmit) {\r\n    if (opts.outFile != null) {\r\n      if (/\\.was?t$/.test(opts.outFile) && opts.textFile == null) {\r\n        opts.textFile = opts.outFile;\r\n      } else if (/\\.js$/.test(opts.outFile) && opts.jsFile == null) {\r\n        opts.jsFile = opts.outFile;\r\n      } else if (opts.binaryFile == null) {\r\n        opts.binaryFile = opts.outFile;\r\n      }\r\n    }\r\n\r\n    let hasStdout = false;\r\n    let hasOutput = opts.textFile != null\r\n                 || opts.binaryFile != null\r\n                 || opts.jsFile != null\r\n                 || opts.tsdFile != null\r\n                 || opts.idlFile != null;\r\n\r\n    // Write binary\r\n    if (opts.binaryFile != null) {\r\n      let basename = path.basename(opts.binaryFile);\r\n      let sourceMapURL = opts.sourceMap != null\r\n        ? opts.sourceMap.length\r\n          ? opts.sourceMap\r\n          : \"./\" + basename + \".map\"\r\n        : null;\r\n\r\n      let wasm;\r\n      stats.emitCount++;\r\n      stats.emitTime += measure(() => {\r\n        try {\r\n          wasm = module.emitBinary(sourceMapURL);\r\n        } catch (e) {\r\n          crash(\"emitBinary\", e);\r\n        }\r\n      });\r\n\r\n      if (opts.binaryFile.length) {\r\n        writeFile(opts.binaryFile, wasm.binary, baseDir);\r\n      } else {\r\n        writeStdout(wasm.binary);\r\n        hasStdout = true;\r\n      }\r\n\r\n      // Post-process source map\r\n      if (wasm.sourceMap != \"\") {\r\n        if (opts.binaryFile.length) {\r\n          let map = JSON.parse(wasm.sourceMap);\r\n          map.sourceRoot = \"./\" + basename;\r\n          let contents = [];\r\n          map.sources.forEach((name, index) => {\r\n            let text = assemblyscript.getSource(program, __newString(name.replace(extension.re, \"\")));\r\n            if (text == null) return callback(Error(\"Source of file '\" + name + \"' not found.\"));\r\n            contents[index] = text;\r\n          });\r\n          map.sourcesContent = contents;\r\n          writeFile(path.join(\r\n            path.dirname(opts.binaryFile),\r\n            path.basename(sourceMapURL)\r\n          ).replace(/^\\.\\//, \"\"), JSON.stringify(map), baseDir);\r\n        } else {\r\n          stderr.write(\"Skipped source map (stdout already occupied)\" + EOL);\r\n        }\r\n      }\r\n    }\r\n\r\n    // Write text (also fallback)\r\n    if (opts.textFile != null || !hasOutput) {\r\n      let out;\r\n      if (opts.textFile != null && opts.textFile.length) {\r\n        // use superset text format when extension is `.wast`.\r\n        // Otherwise use official stack IR format (wat).\r\n        let wastFormat = opts.textFile.endsWith('.wast');\r\n        stats.emitCount++;\r\n        stats.emitTime += measure(() => {\r\n          try {\r\n            if (wastFormat) {\r\n              out = module.emitText();\r\n            } else {\r\n              out = module.emitStackIR(true);\r\n            }\r\n          } catch (e) {\r\n            crash(\"emitText\", e);\r\n          }\r\n        });\r\n        writeFile(opts.textFile, out, baseDir);\r\n      } else if (!hasStdout) {\r\n        stats.emitCount++;\r\n        stats.emitTime += measure(() => {\r\n          try {\r\n            out = module.emitStackIR(true);\r\n          } catch (e) {\r\n            crash(\"emitText\", e);\r\n          }\r\n        });\r\n        writeStdout(out);\r\n      }\r\n    }\r\n\r\n    // Write WebIDL\r\n    if (opts.idlFile != null) {\r\n      let idl;\r\n      if (opts.idlFile.length) {\r\n        stats.emitCount++;\r\n        stats.emitTime += measure(() => {\r\n          try {\r\n            idl = assemblyscript.buildIDL(program);\r\n          } catch (e) {\r\n            crash(\"buildIDL\", e);\r\n          }\r\n        });\r\n        writeFile(opts.idlFile, __getString(idl), baseDir);\r\n      } else if (!hasStdout) {\r\n        stats.emitCount++;\r\n        stats.emitTime += measure(() => {\r\n          try {\r\n            idl = assemblyscript.buildIDL(program);\r\n          } catch (e) {\r\n            crash(\"buildIDL\", e);\r\n          }\r\n        });\r\n        writeStdout(__getString(idl));\r\n        hasStdout = true;\r\n      }\r\n    }\r\n\r\n    // Write TypeScript definition\r\n    if (opts.tsdFile != null) {\r\n      let tsd;\r\n      if (opts.tsdFile.length) {\r\n        stats.emitCount++;\r\n        stats.emitTime += measure(() => {\r\n          try {\r\n            tsd = assemblyscript.buildTSD(program);\r\n          } catch (e) {\r\n            crash(\"buildTSD\", e);\r\n          }\r\n        });\r\n        writeFile(opts.tsdFile, __getString(tsd), baseDir);\r\n      } else if (!hasStdout) {\r\n        stats.emitCount++;\r\n        stats.emitTime += measure(() => {\r\n          try {\r\n            tsd = assemblyscript.buildTSD(program);\r\n          } catch (e) {\r\n            crash(\"buildTSD\", e);\r\n          }\r\n        });\r\n        writeStdout(__getString(tsd));\r\n        hasStdout = true;\r\n      }\r\n    }\r\n\r\n    // Write JS (modifies the binary, so must be last)\r\n    if (opts.jsFile != null) {\r\n      let js;\r\n      if (opts.jsFile.length) {\r\n        stats.emitCount++;\r\n        stats.emitTime += measure(() => {\r\n          try {\r\n            js = module.emitAsmjs();\r\n          } catch (e) {\r\n            crash(\"emitJS\", e);\r\n          }\r\n        });\r\n        writeFile(opts.jsFile, js, baseDir);\r\n      } else if (!hasStdout) {\r\n        stats.emitCount++;\r\n        stats.emitTime += measure(() => {\r\n          try {\r\n            js = module.emitAsmjs();\r\n          } catch (e) {\r\n            crash(\"emitJS\", e);\r\n          }\r\n        });\r\n        writeStdout(js);\r\n      }\r\n    }\r\n  }\r\n\r\n  module.dispose();\r\n  if (opts.measure) {\r\n    printStats(stats, stderr);\r\n  }\r\n\r\n  return callback(null);\r\n\r\n  function readFileNode(filename, baseDir) {\r\n    let name = path.resolve(baseDir, filename);\r\n    try {\r\n      let text;\r\n      stats.readCount++;\r\n      stats.readTime += measure(() => {\r\n        text = fs.readFileSync(name, \"utf8\");\r\n      });\r\n      return text;\r\n    } catch (e) {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  function writeFileNode(filename, contents, baseDir) {\r\n    try {\r\n      stats.writeCount++;\r\n      stats.writeTime += measure(() => {\r\n        const dirPath = path.resolve(baseDir, path.dirname(filename));\r\n        filename = path.basename(filename);\r\n        const outputFilePath = path.join(dirPath, filename);\r\n        if (!fs.existsSync(dirPath)) mkdirp(dirPath);\r\n        fs.writeFileSync(outputFilePath, contents);\r\n      });\r\n      return true;\r\n    } catch (e) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  function listFilesNode(dirname, baseDir) {\r\n    var files;\r\n    try {\r\n      stats.readCount++;\r\n      stats.readTime += measure(() => {\r\n        files = fs.readdirSync(path.join(baseDir, dirname))\r\n          .filter(file => extension.re_except_d.test(file));\r\n      });\r\n      return files;\r\n    } catch (e) {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  function writeStdout(contents) {\r\n    if (!writeStdout.used) {\r\n      stats.writeCount++;\r\n      writeStdout.used = true;\r\n    }\r\n    stats.writeTime += measure(() => {\r\n      stdout.write(contents);\r\n    });\r\n  }\r\n};\r\n\r\nconst toString = Object.prototype.toString;\r\n\r\nfunction isObject(arg) {\r\n  return toString.call(arg) === \"[object Object]\";\r\n}\r\n\r\nfunction getAsconfig(file, baseDir, readFile) {\r\n  const contents = readFile(file, baseDir);\r\n  const location = path.join(baseDir, file);\r\n  if (!contents) return null;\r\n\r\n  // obtain the configuration\r\n  let config;\r\n  try {\r\n    config = JSON.parse(contents);\r\n  } catch(ex) {\r\n    throw new Error(\"Asconfig is not valid json: \" + location);\r\n  }\r\n\r\n  // validate asconfig shape\r\n  if (config.options && !isObject(config.options)) {\r\n    throw new Error(\"Asconfig.options is not an object: \" + location);\r\n  }\r\n\r\n  if (config.include && !Array.isArray(config.include)) {\r\n    throw new Error(\"Asconfig.include is not an array: \" + location);\r\n  }\r\n\r\n  if (config.targets) {\r\n    if (!isObject(config.targets)) {\r\n      throw new Error(\"Asconfig.targets is not an object: \" + location);\r\n    }\r\n    const targets = Object.keys(config.targets);\r\n    for (let i = 0; i < targets.length; i++) {\r\n      const target = targets[i];\r\n      if (!isObject(config.targets[target])) {\r\n        throw new Error(\"Asconfig.targets.\" + target + \" is not an object: \" + location);\r\n      }\r\n    }\r\n  }\r\n\r\n  if (config.extends && typeof config.extends !== \"string\") {\r\n    throw new Error(\"Asconfig.extends is not a string: \" + location);\r\n  }\r\n\r\n  return config;\r\n}\r\n\r\nexports.getAsconfig = getAsconfig;\r\n\r\n/** Checks diagnostics emitted so far for errors. */\r\nfunction checkDiagnostics(program, stderr, reportDiagnostic) {\r\n  var numErrors = 0;\r\n  do {\r\n    let diagnosticPtr = assemblyscript.nextDiagnostic(program);\r\n    if (!diagnosticPtr) break;\r\n    __pin(diagnosticPtr);\r\n    if (stderr) {\r\n      stderr.write(\r\n        __getString(assemblyscript.formatDiagnostic(diagnosticPtr, stderr.isTTY, true)) +\r\n        EOL + EOL\r\n      );\r\n    }\r\n    if (reportDiagnostic) {\r\n      const diagnostic = __wrap(diagnosticPtr, assemblyscript.DiagnosticMessage);\r\n      const range = __wrap(diagnostic.range, assemblyscript.Range);\r\n      const relatedRange = __wrap(diagnostic.relatedRange, assemblyscript.Range);\r\n      const rangeSource = range ? __wrap(range.source, assemblyscript.Source) : null;\r\n      const relatedRangeSource = relatedRange ? __wrap(relatedRange.source, assemblyscript.Source) : null;\r\n\r\n      reportDiagnostic({\r\n        message: __getString(diagnostic.message),\r\n        code: diagnostic.code,\r\n        category: diagnostic.category,\r\n        range: range ? {\r\n          start: range.start,\r\n          end: range.end,\r\n          source: rangeSource ? {\r\n            normalizedPath: __getString(rangeSource.normalizedPath)\r\n          } : null,\r\n        } : null,\r\n        relatedRange: relatedRange ? {\r\n          start: relatedRange.start,\r\n          end: relatedRange.end,\r\n          source: relatedRangeSource ? {\r\n            normalizedPath: __getString(relatedRangeSource.normalizedPath)\r\n          } : null\r\n        } : null\r\n      });\r\n    }\r\n    if (assemblyscript.isError(diagnosticPtr)) ++numErrors;\r\n    __unpin(diagnosticPtr);\r\n  } while (true);\r\n  return numErrors;\r\n}\r\n\r\nexports.checkDiagnostics = checkDiagnostics;\r\n\r\n/** Creates an empty set of stats. */\r\nfunction createStats() {\r\n  return {\r\n    readTime: 0,\r\n    readCount: 0,\r\n    writeTime: 0,\r\n    writeCount: 0,\r\n    parseTime: 0,\r\n    parseCount: 0,\r\n    initializeTime: 0,\r\n    initializeCount: 0,\r\n    compileTime: 0,\r\n    compileCount: 0,\r\n    emitTime: 0,\r\n    emitCount: 0,\r\n    validateTime: 0,\r\n    validateCount: 0,\r\n    optimizeTime: 0,\r\n    optimizeCount: 0,\r\n    transformTime: 0,\r\n    transformCount: 0\r\n  };\r\n}\r\n\r\nexports.createStats = createStats;\r\n\r\n/** Measures the execution time of the specified function.  */\r\nfunction measure(fn) {\r\n  const start = process.hrtime();\r\n  fn();\r\n  const times = process.hrtime(start);\r\n  return times[0] * 1e9 + times[1];\r\n}\r\n\r\nexports.measure = measure;\r\n\r\nfunction pad(str, len) {\r\n  while (str.length < len) str = \" \" + str;\r\n  return str;\r\n}\r\n\r\n/** Formats a high resolution time to a human readable string. */\r\nfunction formatTime(time) {\r\n  return time ? (time / 1e6).toFixed(3) + \" ms\" : \"n/a\";\r\n}\r\n\r\nexports.formatTime = formatTime;\r\n\r\n/** Formats and prints out the contents of a set of stats. */\r\nfunction printStats(stats, output) {\r\n  const format = (time, count) => pad(formatTime(time), 12) + \"  n=\" + count;\r\n  (output || process.stdout).write([\r\n    \"I/O Read   : \" + format(stats.readTime, stats.readCount),\r\n    \"I/O Write  : \" + format(stats.writeTime, stats.writeCount),\r\n    \"Parse      : \" + format(stats.parseTime, stats.parseCount),\r\n    \"Initialize : \" + format(stats.initializeTime, stats.initializeCount),\r\n    \"Compile    : \" + format(stats.compileTime, stats.compileCount),\r\n    \"Emit       : \" + format(stats.emitTime, stats.emitCount),\r\n    \"Validate   : \" + format(stats.validateTime, stats.validateCount),\r\n    \"Optimize   : \" + format(stats.optimizeTime, stats.optimizeCount),\r\n    \"Transform  : \" + format(stats.transformTime, stats.transformCount),\r\n    \"\"\r\n  ].join(EOL) + EOL);\r\n}\r\n\r\nexports.printStats = printStats;\r\n\r\nvar allocBuffer = typeof global !== \"undefined\" && global.Buffer\r\n  ? global.Buffer.allocUnsafe || (len => new global.Buffer(len))\r\n  : len => new Uint8Array(len);\r\n\r\n/** Creates a memory stream that can be used in place of stdout/stderr. */\r\nfunction createMemoryStream(fn) {\r\n  var stream = [];\r\n  stream.write = function(chunk) {\r\n    if (fn) fn(chunk);\r\n    if (typeof chunk === \"string\") {\r\n      let buffer = allocBuffer(utf8.length(chunk));\r\n      utf8.write(chunk, buffer, 0);\r\n      chunk = buffer;\r\n    }\r\n    this.push(chunk);\r\n  };\r\n  stream.reset = function() {\r\n    stream.length = 0;\r\n  };\r\n  stream.toBuffer = function() {\r\n    var offset = 0, i = 0, k = this.length;\r\n    while (i < k) offset += this[i++].length;\r\n    var buffer = allocBuffer(offset);\r\n    offset = i = 0;\r\n    while (i < k) {\r\n      buffer.set(this[i], offset);\r\n      offset += this[i].length;\r\n      ++i;\r\n    }\r\n    return buffer;\r\n  };\r\n  stream.toString = function() {\r\n    var buffer = this.toBuffer();\r\n    return utf8.read(buffer, 0, buffer.length);\r\n  };\r\n  return stream;\r\n}\r\n\r\nexports.createMemoryStream = createMemoryStream;\r\n\r\n/** Compatible TypeScript compiler options for syntax highlighting etc. */\r\nexports.tscOptions = {\r\n  alwaysStrict: true,\r\n  noImplicitAny: true,\r\n  noImplicitReturns: true,\r\n  noImplicitThis: true,\r\n  noEmitOnError: true,\r\n  strictNullChecks: true,\r\n  experimentalDecorators: true,\r\n  target: \"esnext\",\r\n  module: \"commonjs\",\r\n  noLib: true,\r\n  types: [],\r\n  allowJs: false\r\n};\r\n\r\n// Gracefully handle crashes\r\nfunction crash(stage, e) {\r\n  const BAR = colorsUtil.red(\" \");\r\n  console.error([\r\n    EOL,\r\n    BAR, \"Whoops, the AssemblyScript compiler has crashed during \", stage, \" :-(\", EOL,\r\n    BAR, EOL,\r\n    BAR, \"Here is a stack trace that may or may not be useful:\", EOL,\r\n    BAR, EOL,\r\n    e.stack.replace(/^/mg, BAR), EOL,\r\n    BAR, EOL,\r\n    BAR, \"If it refers to the dist files, try to 'npm install source-map-support' and\", EOL,\r\n    BAR, \"run again, which should then show the actual code location in the sources.\", EOL,\r\n    BAR, EOL,\r\n    BAR, \"If you see where the error is, feel free to send us a pull request. If not,\", EOL,\r\n    BAR, \"please let us know: https://github.com/AssemblyScript/assemblyscript/issues\", EOL,\r\n    BAR, EOL,\r\n    BAR, \"Thank you!\", EOL\r\n  ].join(\"\"));\r\n  process.exit(1);\r\n}\r\n","module.exports = {};\r\n","const process = require(\"process\"); // ensure shim\r\n\r\n// https://github.com/browserify/path-browserify v1.0.1\r\n//\r\n// Copyright (c) 2013 James Halliday\r\n// Copyright Joyent, Inc. and other Node contributors.\r\n//\r\n// Permission is hereby granted, free of charge, to any person obtaining a\r\n// copy of this software and associated documentation files (the\r\n// \"Software\"), to deal in the Software without restriction, including\r\n// without limitation the rights to use, copy, modify, merge, publish,\r\n// distribute, sublicense, and/or sell copies of the Software, and to permit\r\n// persons to whom the Software is furnished to do so, subject to the\r\n// following conditions:\r\n//\r\n// The above copyright notice and this permission notice shall be included\r\n// in all copies or substantial portions of the Software.\r\n//\r\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\r\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\r\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\r\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\r\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\r\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\r\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\r\nfunction assertPath(path) {\r\n  if (typeof path !== 'string') {\r\n    throw new TypeError('Path must be a string. Received ' + JSON.stringify(path));\r\n  }\r\n}\r\n\r\n// Resolves . and .. elements in a path with directory names\r\nfunction normalizeStringPosix(path, allowAboveRoot) {\r\n  var res = '';\r\n  var lastSegmentLength = 0;\r\n  var lastSlash = -1;\r\n  var dots = 0;\r\n  var code;\r\n  for (var i = 0; i <= path.length; ++i) {\r\n    if (i < path.length)\r\n      code = path.charCodeAt(i);\r\n    else if (code === 47 /*/*/)\r\n      break;\r\n    else\r\n      code = 47 /*/*/;\r\n    if (code === 47 /*/*/) {\r\n      if (lastSlash === i - 1 || dots === 1) {\r\n        // NOOP\r\n      } else if (lastSlash !== i - 1 && dots === 2) {\r\n        if (res.length < 2 || lastSegmentLength !== 2 || res.charCodeAt(res.length - 1) !== 46 || res.charCodeAt(res.length - 2) !== 46) {\r\n          if (res.length > 2) {\r\n            var lastSlashIndex = res.lastIndexOf('/');\r\n            if (lastSlashIndex !== res.length - 1) {\r\n              if (lastSlashIndex === -1) {\r\n                res = '';\r\n                lastSegmentLength = 0;\r\n              } else {\r\n                res = res.slice(0, lastSlashIndex);\r\n                lastSegmentLength = res.length - 1 - res.lastIndexOf('/');\r\n              }\r\n              lastSlash = i;\r\n              dots = 0;\r\n              continue;\r\n            }\r\n          } else if (res.length === 2 || res.length === 1) {\r\n            res = '';\r\n            lastSegmentLength = 0;\r\n            lastSlash = i;\r\n            dots = 0;\r\n            continue;\r\n          }\r\n        }\r\n        if (allowAboveRoot) {\r\n          if (res.length > 0)\r\n            res += '/..';\r\n          else\r\n            res = '..';\r\n          lastSegmentLength = 2;\r\n        }\r\n      } else {\r\n        if (res.length > 0)\r\n          res += '/' + path.slice(lastSlash + 1, i);\r\n        else\r\n          res = path.slice(lastSlash + 1, i);\r\n        lastSegmentLength = i - lastSlash - 1;\r\n      }\r\n      lastSlash = i;\r\n      dots = 0;\r\n    } else if (code === 46 && dots !== -1) {\r\n      ++dots;\r\n    } else {\r\n      dots = -1;\r\n    }\r\n  }\r\n  return res;\r\n}\r\n\r\nfunction _format(sep, pathObject) {\r\n  var dir = pathObject.dir || pathObject.root;\r\n  var base = pathObject.base || (pathObject.name || '') + (pathObject.ext || '');\r\n  if (!dir) {\r\n    return base;\r\n  }\r\n  if (dir === pathObject.root) {\r\n    return dir + base;\r\n  }\r\n  return dir + sep + base;\r\n}\r\n\r\nvar posix = {\r\n  // path.resolve([from ...], to)\r\n  resolve: function resolve() {\r\n    var resolvedPath = '';\r\n    var resolvedAbsolute = false;\r\n    var cwd;\r\n\r\n    for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\r\n      var path;\r\n      if (i >= 0)\r\n        path = arguments[i];\r\n      else {\r\n        if (cwd === undefined)\r\n          cwd = process.cwd();\r\n        path = cwd;\r\n      }\r\n\r\n      assertPath(path);\r\n\r\n      // Skip empty entries\r\n      if (path.length === 0) {\r\n        continue;\r\n      }\r\n\r\n      resolvedPath = path + '/' + resolvedPath;\r\n      resolvedAbsolute = path.charCodeAt(0) === 47 /*/*/;\r\n    }\r\n\r\n    // At this point the path should be resolved to a full absolute path, but\r\n    // handle relative paths to be safe (might happen when process.cwd() fails)\r\n\r\n    // Normalize the path\r\n    resolvedPath = normalizeStringPosix(resolvedPath, !resolvedAbsolute);\r\n\r\n    if (resolvedAbsolute) {\r\n      if (resolvedPath.length > 0)\r\n        return '/' + resolvedPath;\r\n      else\r\n        return '/';\r\n    } else if (resolvedPath.length > 0) {\r\n      return resolvedPath;\r\n    } else {\r\n      return '.';\r\n    }\r\n  },\r\n\r\n  normalize: function normalize(path) {\r\n    assertPath(path);\r\n\r\n    if (path.length === 0) return '.';\r\n\r\n    var isAbsolute = path.charCodeAt(0) === 47 /*/*/;\r\n    var trailingSeparator = path.charCodeAt(path.length - 1) === 47 /*/*/;\r\n\r\n    // Normalize the path\r\n    path = normalizeStringPosix(path, !isAbsolute);\r\n\r\n    if (path.length === 0 && !isAbsolute) path = '.';\r\n    if (path.length > 0 && trailingSeparator) path += '/';\r\n\r\n    if (isAbsolute) return '/' + path;\r\n    return path;\r\n  },\r\n\r\n  isAbsolute: function isAbsolute(path) {\r\n    assertPath(path);\r\n    return path.length > 0 && path.charCodeAt(0) === 47 /*/*/;\r\n  },\r\n\r\n  join: function join() {\r\n    if (arguments.length === 0)\r\n      return '.';\r\n    var joined;\r\n    for (var i = 0; i < arguments.length; ++i) {\r\n      var arg = arguments[i];\r\n      assertPath(arg);\r\n      if (arg.length > 0) {\r\n        if (joined === undefined)\r\n          joined = arg;\r\n        else\r\n          joined += '/' + arg;\r\n      }\r\n    }\r\n    if (joined === undefined)\r\n      return '.';\r\n    return posix.normalize(joined);\r\n  },\r\n\r\n  relative: function relative(from, to) {\r\n    assertPath(from);\r\n    assertPath(to);\r\n\r\n    if (from === to) return '';\r\n\r\n    from = posix.resolve(from);\r\n    to = posix.resolve(to);\r\n\r\n    if (from === to) return '';\r\n\r\n    if (from === \".\") return to; // FIX for 'odule.ts' (see issue #1398)\r\n\r\n    // Trim any leading backslashes\r\n    var fromStart = 1;\r\n    for (; fromStart < from.length; ++fromStart) {\r\n      if (from.charCodeAt(fromStart) !== 47 /*/*/)\r\n        break;\r\n    }\r\n    var fromEnd = from.length;\r\n    var fromLen = fromEnd - fromStart;\r\n\r\n    // Trim any leading backslashes\r\n    var toStart = 1;\r\n    for (; toStart < to.length; ++toStart) {\r\n      if (to.charCodeAt(toStart) !== 47 /*/*/)\r\n        break;\r\n    }\r\n    var toEnd = to.length;\r\n    var toLen = toEnd - toStart;\r\n\r\n    // Compare paths to find the longest common path from root\r\n    var length = fromLen < toLen ? fromLen : toLen;\r\n    var lastCommonSep = -1;\r\n    var i = 0;\r\n    for (; i <= length; ++i) {\r\n      if (i === length) {\r\n        if (toLen > length) {\r\n          if (to.charCodeAt(toStart + i) === 47 /*/*/) {\r\n            // We get here if `from` is the exact base path for `to`.\r\n            // For example: from='/foo/bar'; to='/foo/bar/baz'\r\n            return to.slice(toStart + i + 1);\r\n          } else if (i === 0) {\r\n            // We get here if `from` is the root\r\n            // For example: from='/'; to='/foo'\r\n            return to.slice(toStart + i);\r\n          }\r\n        } else if (fromLen > length) {\r\n          if (from.charCodeAt(fromStart + i) === 47 /*/*/) {\r\n            // We get here if `to` is the exact base path for `from`.\r\n            // For example: from='/foo/bar/baz'; to='/foo/bar'\r\n            lastCommonSep = i;\r\n          } else if (i === 0) {\r\n            // We get here if `to` is the root.\r\n            // For example: from='/foo'; to='/'\r\n            lastCommonSep = 0;\r\n          }\r\n        }\r\n        break;\r\n      }\r\n      var fromCode = from.charCodeAt(fromStart + i);\r\n      var toCode = to.charCodeAt(toStart + i);\r\n      if (fromCode !== toCode)\r\n        break;\r\n      else if (fromCode === 47 /*/*/)\r\n        lastCommonSep = i;\r\n    }\r\n\r\n    var out = '';\r\n    // Generate the relative path based on the path difference between `to`\r\n    // and `from`\r\n    for (i = fromStart + lastCommonSep + 1; i <= fromEnd; ++i) {\r\n      if (i === fromEnd || from.charCodeAt(i) === 47 /*/*/) {\r\n        if (out.length === 0)\r\n          out += '..';\r\n        else\r\n          out += '/..';\r\n      }\r\n    }\r\n\r\n    // Lastly, append the rest of the destination (`to`) path that comes after\r\n    // the common path parts\r\n    if (out.length > 0)\r\n      return out + to.slice(toStart + lastCommonSep);\r\n    else {\r\n      toStart += lastCommonSep;\r\n      if (to.charCodeAt(toStart) === 47 /*/*/)\r\n        ++toStart;\r\n      return to.slice(toStart);\r\n    }\r\n  },\r\n\r\n  _makeLong: function _makeLong(path) {\r\n    return path;\r\n  },\r\n\r\n  dirname: function dirname(path) {\r\n    assertPath(path);\r\n    if (path.length === 0) return '.';\r\n    var code = path.charCodeAt(0);\r\n    var hasRoot = code === 47 /*/*/;\r\n    var end = -1;\r\n    var matchedSlash = true;\r\n    for (var i = path.length - 1; i >= 1; --i) {\r\n      code = path.charCodeAt(i);\r\n      if (code === 47 /*/*/) {\r\n        if (!matchedSlash) {\r\n          end = i;\r\n          break;\r\n        }\r\n      } else {\r\n        // We saw the first non-path separator\r\n        matchedSlash = false;\r\n      }\r\n    }\r\n\r\n    if (end === -1) return hasRoot ? '/' : '.';\r\n    if (hasRoot && end === 1) return '//';\r\n    return path.slice(0, end);\r\n  },\r\n\r\n  basename: function basename(path, ext) {\r\n    if (ext !== undefined && typeof ext !== 'string') throw new TypeError('\"ext\" argument must be a string');\r\n    assertPath(path);\r\n\r\n    var start = 0;\r\n    var end = -1;\r\n    var matchedSlash = true;\r\n    var i;\r\n\r\n    if (ext !== undefined && ext.length > 0 && ext.length <= path.length) {\r\n      if (ext.length === path.length && ext === path) return '';\r\n      var extIdx = ext.length - 1;\r\n      var firstNonSlashEnd = -1;\r\n      for (i = path.length - 1; i >= 0; --i) {\r\n        var code = path.charCodeAt(i);\r\n        if (code === 47 /*/*/) {\r\n          // If we reached a path separator that was not part of a set of path\r\n          // separators at the end of the string, stop now\r\n          if (!matchedSlash) {\r\n            start = i + 1;\r\n            break;\r\n          }\r\n        } else {\r\n          if (firstNonSlashEnd === -1) {\r\n            // We saw the first non-path separator, remember this index in case\r\n            // we need it if the extension ends up not matching\r\n            matchedSlash = false;\r\n            firstNonSlashEnd = i + 1;\r\n          }\r\n          if (extIdx >= 0) {\r\n            // Try to match the explicit extension\r\n            if (code === ext.charCodeAt(extIdx)) {\r\n              if (--extIdx === -1) {\r\n                // We matched the extension, so mark this as the end of our path\r\n                // component\r\n                end = i;\r\n              }\r\n            } else {\r\n              // Extension does not match, so our result is the entire path\r\n              // component\r\n              extIdx = -1;\r\n              end = firstNonSlashEnd;\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      if (start === end) end = firstNonSlashEnd;else if (end === -1) end = path.length;\r\n      return path.slice(start, end);\r\n    } else {\r\n      for (i = path.length - 1; i >= 0; --i) {\r\n        if (path.charCodeAt(i) === 47 /*/*/) {\r\n          // If we reached a path separator that was not part of a set of path\r\n          // separators at the end of the string, stop now\r\n          if (!matchedSlash) {\r\n            start = i + 1;\r\n            break;\r\n          }\r\n        } else if (end === -1) {\r\n          // We saw the first non-path separator, mark this as the end of our\r\n          // path component\r\n          matchedSlash = false;\r\n          end = i + 1;\r\n        }\r\n      }\r\n\r\n      if (end === -1) return '';\r\n      return path.slice(start, end);\r\n    }\r\n  },\r\n\r\n  extname: function extname(path) {\r\n    assertPath(path);\r\n    var startDot = -1;\r\n    var startPart = 0;\r\n    var end = -1;\r\n    var matchedSlash = true;\r\n    // Track the state of characters (if any) we see before our first dot and\r\n    // after any path separator we find\r\n    var preDotState = 0;\r\n    for (var i = path.length - 1; i >= 0; --i) {\r\n      var code = path.charCodeAt(i);\r\n      if (code === 47 /*/*/) {\r\n        // If we reached a path separator that was not part of a set of path\r\n        // separators at the end of the string, stop now\r\n        if (!matchedSlash) {\r\n          startPart = i + 1;\r\n          break;\r\n        }\r\n        continue;\r\n      }\r\n      if (end === -1) {\r\n        // We saw the first non-path separator, mark this as the end of our\r\n        // extension\r\n        matchedSlash = false;\r\n        end = i + 1;\r\n      }\r\n      if (code === 46) {\r\n        // If this is our first dot, mark it as the start of our extension\r\n        if (startDot === -1)\r\n          startDot = i;\r\n        else if (preDotState !== 1)\r\n          preDotState = 1;\r\n      } else if (startDot !== -1) {\r\n        // We saw a non-dot and non-path separator before our dot, so we should\r\n        // have a good chance at having a non-empty extension\r\n        preDotState = -1;\r\n      }\r\n    }\r\n\r\n    if (startDot === -1 || end === -1 ||\r\n        // We saw a non-dot character immediately before the dot\r\n        preDotState === 0 ||\r\n        // The (right-most) trimmed path component is exactly '..'\r\n        preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\r\n      return '';\r\n    }\r\n    return path.slice(startDot, end);\r\n  },\r\n\r\n  format: function format(pathObject) {\r\n    if (pathObject === null || typeof pathObject !== 'object') {\r\n      throw new TypeError('The \"pathObject\" argument must be of type Object. Received type ' + typeof pathObject);\r\n    }\r\n    return _format('/', pathObject);\r\n  },\r\n\r\n  parse: function parse(path) {\r\n    assertPath(path);\r\n\r\n    var ret = { root: '', dir: '', base: '', ext: '', name: '' };\r\n    if (path.length === 0) return ret;\r\n    var code = path.charCodeAt(0);\r\n    var isAbsolute = code === 47 /*/*/;\r\n    var start;\r\n    if (isAbsolute) {\r\n      ret.root = '/';\r\n      start = 1;\r\n    } else {\r\n      start = 0;\r\n    }\r\n    var startDot = -1;\r\n    var startPart = 0;\r\n    var end = -1;\r\n    var matchedSlash = true;\r\n    var i = path.length - 1;\r\n\r\n    // Track the state of characters (if any) we see before our first dot and\r\n    // after any path separator we find\r\n    var preDotState = 0;\r\n\r\n    // Get non-dir info\r\n    for (; i >= start; --i) {\r\n      code = path.charCodeAt(i);\r\n      if (code === 47 /*/*/) {\r\n        // If we reached a path separator that was not part of a set of path\r\n        // separators at the end of the string, stop now\r\n        if (!matchedSlash) {\r\n          startPart = i + 1;\r\n          break;\r\n        }\r\n        continue;\r\n      }\r\n      if (end === -1) {\r\n        // We saw the first non-path separator, mark this as the end of our\r\n        // extension\r\n        matchedSlash = false;\r\n        end = i + 1;\r\n      }\r\n      if (code === 46) {\r\n        // If this is our first dot, mark it as the start of our extension\r\n        if (startDot === -1) startDot = i;else if (preDotState !== 1) preDotState = 1;\r\n      } else if (startDot !== -1) {\r\n        // We saw a non-dot and non-path separator before our dot, so we should\r\n        // have a good chance at having a non-empty extension\r\n        preDotState = -1;\r\n      }\r\n    }\r\n\r\n    if (startDot === -1 || end === -1 ||\r\n    // We saw a non-dot character immediately before the dot\r\n    preDotState === 0 ||\r\n    // The (right-most) trimmed path component is exactly '..'\r\n    preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\r\n      if (end !== -1) {\r\n        if (startPart === 0 && isAbsolute) ret.base = ret.name = path.slice(1, end);else ret.base = ret.name = path.slice(startPart, end);\r\n      }\r\n    } else {\r\n      if (startPart === 0 && isAbsolute) {\r\n        ret.name = path.slice(1, startDot);\r\n        ret.base = path.slice(1, end);\r\n      } else {\r\n        ret.name = path.slice(startPart, startDot);\r\n        ret.base = path.slice(startPart, end);\r\n      }\r\n      ret.ext = path.slice(startDot, end);\r\n    }\r\n\r\n    if (startPart > 0) ret.dir = path.slice(0, startPart - 1);else if (isAbsolute) ret.dir = '/';\r\n\r\n    return ret;\r\n  },\r\n\r\n  sep: '/',\r\n  delimiter: ':',\r\n  win32: null,\r\n  posix: null\r\n};\r\n\r\nposix.posix = posix;\r\n\r\nmodule.exports = posix;\r\n","module.exports = {\r\n  platform: \"linux\",\r\n  cwd() {\r\n    return \".\";\r\n  },\r\n  umask() {\r\n    return 0;\r\n  },\r\n  hrtime,\r\n  argv: [],\r\n  exit(code = 0) {\r\n    throw Error(`exit ${code}`);\r\n  }\r\n};\r\n\r\n// https://github.com/kumavis/browser-process-hrtime v1.0.0\r\n//\r\n// Copyright 2014 kumavis\r\n//\r\n// Redistribution and use in source and binary forms, with or without\r\n// modification, are permitted provided that the following conditions are met:\r\n//\r\n// 1. Redistributions of source code must retain the above copyright notice,\r\n// this list of conditions and the following disclaimer.\r\n//\r\n// 2. Redistributions in binary form must reproduce the above copyright notice,\r\n// this list of conditions and the following disclaimer in the documentation\r\n// and/or other materials provided with the distribution.\r\n//\r\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\r\n// AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n// ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE\r\n// LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n// SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n// INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n// CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n// ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n// POSSIBILITY OF SUCH DAMAGE.\r\n\r\nvar performance = global.performance || {};\r\nvar performanceNow =\r\n  performance.now        ||\r\n  performance.mozNow     ||\r\n  performance.msNow      ||\r\n  performance.oNow       ||\r\n  performance.webkitNow  ||\r\n  function(){ return (new Date()).getTime(); };\r\n\r\nfunction hrtime(previousTimestamp) {\r\n  var clocktime = performanceNow.call(performance);\r\n  var seconds = Math.floor(clocktime * 1e-3);\r\n  var nanoseconds = Math.floor(clocktime * 1e6 - seconds * 1e9);\r\n  if (previousTimestamp) {\r\n    seconds -= previousTimestamp[0];\r\n    nanoseconds -= previousTimestamp[1];\r\n    if (nanoseconds < 0) {\r\n      seconds--;\r\n      nanoseconds += 1e9;\r\n    }\r\n  }\r\n  return [ seconds, nanoseconds ];\r\n}\r\n","/**\r\n * @fileoverview Terminal colors utility.\r\n * @license Apache-2.0\r\n */\r\n\r\nvar proc = typeof process !== \"undefined\" && process || {};\r\nvar isCI = proc.env && \"CI\" in proc.env; // doesn't work when bundled because 'process' is a mock\r\n\r\nfunction from(stream, base) {\r\n  var colors = base || {};\r\n  colors.supported = (stream && !!stream.isTTY) || isCI;\r\n  colors.gray = text => colors.supported ? exports.GRAY + text + exports.RESET : text;\r\n  colors.red = text => colors.supported ? exports.RED + text + exports.RESET : text;\r\n  colors.green = text => colors.supported ? exports.GREEN + text + exports.RESET : text;\r\n  colors.yellow = text => colors.supported ? exports.YELLOW + text + exports.RESET : text;\r\n  colors.blue = text => colors.supported ? exports.BLUE + text + exports.RESET : text;\r\n  colors.magenta = text => colors.supported ? exports.MAGENTA + text + exports.RESET : text;\r\n  colors.cyan = text => colors.supported ? exports.CYAN + text + exports.RESET : text;\r\n  colors.white = text => colors.supported ? exports.WHITE + text + exports.RESET : text;\r\n  return colors;\r\n}\r\n\r\nexports.stdout = from(proc.stdout, exports);\r\nexports.stderr = from(proc.stderr);\r\nexports.from = from;\r\n\r\nexports.GRAY = \"\\u001b[90m\";\r\nexports.RED = \"\\u001b[91m\";\r\nexports.GREEN = \"\\u001b[92m\";\r\nexports.YELLOW = \"\\u001b[93m\";\r\nexports.BLUE = \"\\u001b[94m\";\r\nexports.MAGENTA = \"\\u001b[95m\";\r\nexports.CYAN = \"\\u001b[96m\";\r\nexports.WHITE = \"\\u001b[97m\";\r\nexports.RESET = \"\\u001b[0m\";\r\n","/**\r\n * @fileoverview File finding utility.\r\n * @license Apache-2.0\r\n */\r\n\r\nconst fs = require(\"fs\");\r\nconst path = require(\"path\");\r\n\r\nfunction findFiles(dirname, filter) {\r\n  var out = [];\r\n  fs.readdirSync(dirname).forEach(name => {\r\n    if (fs.statSync(path.join(dirname, name)).isDirectory()) {\r\n      findFiles(path.join(dirname, name), filter).forEach(iname => out.push(name + \"/\" + iname));\r\n    } else if (!filter || typeof filter === \"function\" ? filter(name) : filter.test(name)) {\r\n      out.push(name);\r\n    }\r\n  });\r\n  return out;\r\n}\r\n\r\nexports.files = findFiles;\r\n","/**\r\n * @fileoverview Recursive mkdir.\r\n * @license\r\n * Copyright 2010 James Halliday (mail@substack.net)\r\n *\r\n * This project is free software released under the MIT/X11 license:\r\n *\r\n * Permission is hereby granted, free of charge, to any person obtaining a copy\r\n * of this software and associated documentation files (the \"Software\"), to deal\r\n * in the Software without restriction, including without limitation the rights\r\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n * copies of the Software, and to permit persons to whom the Software is\r\n * furnished to do so, subject to the following conditions:\r\n *\r\n * The above copyright notice and this permission notice shall be included in\r\n * all copies or substantial portions of the Software.\r\n *\r\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n * THE SOFTWARE.\r\n */\r\n\r\nconst path = require(\"path\");\r\nconst fs = require(\"fs\");\r\nconst process = require(\"process\"); // ensure shim\r\n\r\nmodule.exports = function mkdirp(p, opts, made) {\r\n  if (!opts || typeof opts !== \"object\") {\r\n    opts = { mode: opts };\r\n  }\r\n  var mode = opts.mode;\r\n  if (mode === undefined) {\r\n    mode = 0o777 & (~process.umask());\r\n  }\r\n  if (!made) made = null;\r\n  p = path.resolve(p);\r\n  try {\r\n    fs.mkdirSync(p, mode);\r\n    made = made || p;\r\n  } catch (err0) {\r\n    switch (err0.code) {\r\n      case \"ENOENT\":\r\n        made = mkdirp(path.dirname(p), opts, made);\r\n        mkdirp(p, opts, made);\r\n        break;\r\n      default:\r\n        var stat;\r\n        try {\r\n          stat = fs.statSync(p);\r\n        } catch (err1) {\r\n          throw err0;\r\n        }\r\n        if (!stat.isDirectory()) throw err0;\r\n        break;\r\n    }\r\n  }\r\n  return made;\r\n};\r\n","/**\r\n * @fileoverview Command line options utility.\r\n * @license Apache-2.0\r\n */\r\n\r\nconst path = require(\"path\");\r\nconst colorsUtil = require(\"./colors\");\r\n\r\n// type | meaning\r\n// -----|---------------\r\n// b    | boolean\r\n// i    | integer\r\n// f    | float\r\n// s    | string\r\n// I    | integer array\r\n// F    | float array\r\n// S    | string array\r\n\r\n/** Parses the specified command line arguments according to the given configuration. */\r\nfunction parse(argv, config, propagateDefaults = true) {\r\n  var options = {};\r\n  var unknown = [];\r\n  var args = [];\r\n  var trailing = [];\r\n\r\n  // make an alias map and initialize defaults\r\n  var aliases = {};\r\n  Object.keys(config).forEach(key => {\r\n    if (key.startsWith(\" \")) return;\r\n    var option = config[key];\r\n    if (option.alias != null) {\r\n      if (typeof option.alias === \"string\") aliases[option.alias] = key;\r\n      else if (Array.isArray(option.alias)) option.alias.forEach(alias => aliases[alias] = key);\r\n    }\r\n    if (propagateDefaults && option.default != null) options[key] = option.default;\r\n  });\r\n\r\n  // iterate over argv\r\n  for (var i = 0, k = (argv = argv.slice()).length; i < k; ++i) {\r\n    let arg = argv[i];\r\n    if (arg == \"--\") { ++i; break; }\r\n    let match = /^(?:(-\\w)(?:=(.*))?|(--\\w{2,})(?:=(.*))?)$/.exec(arg), option, key;\r\n    if (match) {\r\n      if (config[arg]) option = config[key = arg]; // exact\r\n      else if (match[1] != null) { // alias\r\n        option = config[key = aliases[match[1].substring(1)]];\r\n        if (option && match[2] != null) argv[i--] = match[2];\r\n      } else if (match[3] != null) { // full\r\n        option = config[key = match[3].substring(2)];\r\n        if (option && match[4] != null) argv[i--] = match[4];\r\n      }\r\n    } else {\r\n      if (arg.charCodeAt(0) == 45) option = config[key = arg]; // exact\r\n      else { args.push(arg); continue; } // argument\r\n    }\r\n    if (option) {\r\n      if (option.value) {\r\n        // alias setting fixed values\r\n        Object.keys(option.value).forEach(k => options[k] = option.value[k]);\r\n      } else if (option.type == null || option.type === \"b\") {\r\n        // boolean flag not taking a value\r\n        options[key] = true;\r\n      } else {\r\n        if (i + 1 < argv.length && argv[i + 1].charCodeAt(0) != 45) {\r\n          // non-boolean with given value\r\n          switch (option.type) {\r\n            case \"i\": options[key] = parseInt(argv[++i], 10); break;\r\n            case \"I\": options[key] = (options[key] || []).concat(parseInt(argv[++i], 10)); break;\r\n            case \"f\": options[key] = parseFloat(argv[++i]); break;\r\n            case \"F\": options[key] = (options[key] || []).concat(parseFloat(argv[++i])); break;\r\n            case \"s\": options[key] = String(argv[++i]); break;\r\n            case \"S\": options[key] = (options[key] || []).concat(argv[++i].split(\",\")); break;\r\n            default: unknown.push(arg); --i;\r\n          }\r\n        } else {\r\n          // non-boolean with omitted value\r\n          switch (option.type) {\r\n            case \"i\":\r\n            case \"f\": options[key] = option.default || 0; break;\r\n            case \"s\": options[key] = option.default || \"\"; break;\r\n            case \"I\":\r\n            case \"F\":\r\n            case \"S\": options[key] = option.default || []; break;\r\n            default: unknown.push(arg);\r\n          }\r\n        }\r\n      }\r\n    } else unknown.push(arg);\r\n  }\r\n  while (i < k) trailing.push(argv[i++]); // trailing\r\n  if (propagateDefaults) addDefaults(config, options);\r\n\r\n  return { options, unknown, arguments: args, trailing };\r\n}\r\n\r\nexports.parse = parse;\r\n\r\n/** Generates the help text for the specified configuration. */\r\nfunction help(config, options) {\r\n  if (!options) options = {};\r\n  var indent = options.indent || 2;\r\n  var padding = options.padding || 24;\r\n  var eol = options.eol || \"\\n\";\r\n  var sbCategories = {};\r\n  var sbOther = [];\r\n  Object.keys(config).forEach(key => {\r\n    var option = config[key];\r\n    if (option.description == null) return;\r\n    var text = \"\";\r\n    while (text.length < indent) text += \" \";\r\n    text += \"--\" + key;\r\n    if (option.alias) text += \", -\" + option.alias;\r\n    while (text.length < padding) text += \" \";\r\n    var sb;\r\n    if (!options.noCategories && option.category) {\r\n      if (!(sb = sbCategories[option.category])) {\r\n        sbCategories[option.category] = sb = [];\r\n      }\r\n    } else {\r\n      sb = sbOther;\r\n    }\r\n    if (Array.isArray(option.description)) {\r\n      sb.push(text + option.description[0] + option.description.slice(1).map(line => {\r\n        for (let i = 0; i < padding; ++i) line = \" \" + line;\r\n        return eol + line;\r\n      }).join(\"\"));\r\n    } else sb.push(text + option.description);\r\n  });\r\n  var sb = [];\r\n  var hasCategories = false;\r\n  Object.keys(sbCategories).forEach(category => {\r\n    hasCategories = true;\r\n    sb.push(eol + \" \" + colorsUtil.gray(category) + eol);\r\n    sb.push(sbCategories[category].join(eol));\r\n  });\r\n  if (hasCategories) {\r\n    sb.push(eol + \" \" + colorsUtil.gray(\"Other\") + eol);\r\n  }\r\n  sb.push(sbOther.join(eol));\r\n  return sb.join(eol);\r\n}\r\n\r\nexports.help = help;\r\n\r\n/** Sanitizes an option value to be a valid value of the option's type. */\r\nfunction sanitizeValue(value, type) {\r\n  if (value != null) {\r\n    switch (type) {\r\n      case undefined:\r\n      case \"b\": return Boolean(value);\r\n      case \"i\": return Math.trunc(value) || 0;\r\n      case \"f\": return Number(value) || 0;\r\n      case \"s\": {\r\n        if (value === true) return \"\";\r\n        return String(value);\r\n      }\r\n      case \"I\": {\r\n        if (!Array.isArray(value)) value = [ value ];\r\n        return value.map(v => Math.trunc(v) || 0);\r\n      }\r\n      case \"F\": {\r\n        if (!Array.isArray(value)) value = [ value ];\r\n        return value.map(v => Number(v) || 0);\r\n      }\r\n      case \"S\": {\r\n        if (!Array.isArray(value)) value = [ value ];\r\n        return value.map(String);\r\n      }\r\n    }\r\n  }\r\n  return undefined;\r\n}\r\n\r\n/** Merges two sets of options into one, preferring the current over the parent set. */\r\nfunction merge(config, currentOptions, parentOptions, parentBaseDir) {\r\n  const mergedOptions = {};\r\n  for (const [key, { type, mutuallyExclusive, isPath, useNodeResolution, cliOnly }] of Object.entries(config)) {\r\n    let currentValue = sanitizeValue(currentOptions[key], type);\r\n    let parentValue = sanitizeValue(parentOptions[key], type);\r\n    if (currentValue == null) {\r\n      if (parentValue != null) {\r\n        // only parent value present\r\n        if (cliOnly) continue;\r\n        if (Array.isArray(parentValue)) {\r\n          let exclude;\r\n          if (isPath) {\r\n            parentValue = parentValue.map(value => resolvePath(value, parentBaseDir, useNodeResolution));\r\n          }\r\n          if (mutuallyExclusive != null && (exclude = currentOptions[mutuallyExclusive])) {\r\n            mergedOptions[key] = parentValue.filter(value => !exclude.includes(value));\r\n          } else {\r\n            mergedOptions[key] = parentValue.slice();\r\n          }\r\n        } else {\r\n          if (isPath) {\r\n            parentValue = resolvePath(parentValue, parentBaseDir, useNodeResolution);\r\n          }\r\n          mergedOptions[key] = parentValue;\r\n        }\r\n      }\r\n    } else if (parentValue == null) {\r\n      // only current value present\r\n      if (Array.isArray(currentValue)) {\r\n        mergedOptions[key] = currentValue.slice();\r\n      } else {\r\n        mergedOptions[key] = currentValue;\r\n      }\r\n    } else {\r\n      // both current and parent values present\r\n      if (Array.isArray(currentValue)) {\r\n        if (cliOnly) {\r\n          mergedOptions[key] = currentValue.slice();\r\n          continue;\r\n        }\r\n        let exclude;\r\n        if (isPath) {\r\n          parentValue = parentValue.map(value => resolvePath(value, parentBaseDir, useNodeResolution));\r\n        }\r\n        if (mutuallyExclusive != null && (exclude = currentOptions[mutuallyExclusive])) {\r\n          mergedOptions[key] = [\r\n            ...currentValue,\r\n            ...parentValue.filter(value => !currentValue.includes(value) && !exclude.includes(value))\r\n          ];\r\n        } else {\r\n          mergedOptions[key] = [\r\n            ...currentValue,\r\n            ...parentValue.filter(value => !currentValue.includes(value)) // dedup\r\n          ];\r\n        }\r\n      } else {\r\n        mergedOptions[key] = currentValue;\r\n      }\r\n    }\r\n  }\r\n  return mergedOptions;\r\n}\r\n\r\nexports.merge = merge;\r\n\r\nconst dynrequire = typeof __webpack_require__ === \"function\"\r\n  ? () => module[`require`] // backticks required\r\n  : require;\r\n\r\n/** Resolves a single possibly relative path. Keeps absolute paths, otherwise prepends baseDir. */\r\nfunction resolvePath(p, baseDir, useNodeResolution = false) {\r\n  if (path.isAbsolute(p)) return p;\r\n  if (useNodeResolution && !p.startsWith(\".\")) {\r\n    return dynrequire.resolve(p, { paths: [ baseDir ] });\r\n  }\r\n  return path.join(baseDir, p);\r\n}\r\n\r\nexports.resolvePath = resolvePath;\r\n\r\n/** Populates default values on a parsed options result. */\r\nfunction addDefaults(config, options) {\r\n  for (const [key, { default: defaultValue }] of Object.entries(config)) {\r\n    if (options[key] == null && defaultValue != null) {\r\n      options[key] = defaultValue;\r\n    }\r\n  }\r\n}\r\n\r\nexports.addDefaults = addDefaults;\r\n","/**\r\n * @fileoverview UTF8 utility.\r\n * @license Apache-2.0\r\n */\r\n\r\n// @protobufjs/utf8\r\n\r\n/**\r\n * A minimal UTF8 implementation for number arrays.\r\n * @memberof util\r\n * @namespace\r\n */\r\nvar utf8 = exports;\r\n\r\n/**\r\n * Calculates the UTF8 byte length of a string.\r\n * @param {string} string String\r\n * @returns {number} Byte length\r\n */\r\nutf8.length = function utf8_length(string) {\r\n  var len = 0,\r\n      c = 0;\r\n  for (var i = 0, l = string.length; i < l; ++i) {\r\n    c = string.charCodeAt(i);\r\n    if (c < 128)\r\n      len += 1;\r\n    else if (c < 2048)\r\n      len += 2;\r\n    else if ((c & 0xFC00) === 0xD800 && (string.charCodeAt(i + 1) & 0xFC00) === 0xDC00) {\r\n      ++i;\r\n      len += 4;\r\n    } else\r\n      len += 3;\r\n  }\r\n  return len;\r\n};\r\n\r\n/**\r\n * Reads UTF8 bytes as a string.\r\n * @param {Uint8Array} buffer Source buffer\r\n * @param {number} start Source start\r\n * @param {number} end Source end\r\n * @returns {string} String read\r\n */\r\nutf8.read = function utf8_read(buffer, start, end) {\r\n  var len = end - start;\r\n  if (len < 1)\r\n    return \"\";\r\n  var parts = null,\r\n      chunk = [],\r\n      i = 0, // char offset\r\n      t;     // temporary\r\n  while (start < end) {\r\n    t = buffer[start++];\r\n    if (t < 128)\r\n      chunk[i++] = t;\r\n    else if (t > 191 && t < 224)\r\n      chunk[i++] = (t & 31) << 6 | buffer[start++] & 63;\r\n    else if (t > 239 && t < 365) {\r\n      t = ((t & 7) << 18 | (buffer[start++] & 63) << 12 | (buffer[start++] & 63) << 6 | buffer[start++] & 63) - 0x10000;\r\n      chunk[i++] = 0xD800 + (t >> 10);\r\n      chunk[i++] = 0xDC00 + (t & 1023);\r\n    } else\r\n      chunk[i++] = (t & 15) << 12 | (buffer[start++] & 63) << 6 | buffer[start++] & 63;\r\n    if (i > 8191) {\r\n      (parts || (parts = [])).push(String.fromCharCode.apply(String, chunk));\r\n      i = 0;\r\n    }\r\n  }\r\n  if (parts) {\r\n    if (i)\r\n      parts.push(String.fromCharCode.apply(String, chunk.slice(0, i)));\r\n    return parts.join(\"\");\r\n  }\r\n  return String.fromCharCode.apply(String, chunk.slice(0, i));\r\n};\r\n\r\n/**\r\n * Writes a string as UTF8 bytes.\r\n * @param {string} string Source string\r\n * @param {Uint8Array} buffer Destination buffer\r\n * @param {number} offset Destination offset\r\n * @returns {number} Bytes written\r\n */\r\nutf8.write = function utf8_write(string, buffer, offset) {\r\n  var start = offset,\r\n      c1, // character 1\r\n      c2; // character 2\r\n  for (var i = 0; i < string.length; ++i) {\r\n    c1 = string.charCodeAt(i);\r\n    if (c1 < 128) {\r\n      buffer[offset++] = c1;\r\n    } else if (c1 < 2048) {\r\n      buffer[offset++] = c1 >> 6 | 192;\r\n      buffer[offset++] = c1 & 63 | 128;\r\n    } else if ((c1 & 0xFC00) === 0xD800 && ((c2 = string.charCodeAt(i + 1)) & 0xFC00) === 0xDC00) {\r\n      c1 = 0x10000 + ((c1 & 0x03FF) << 10) + (c2 & 0x03FF);\r\n      ++i;\r\n      buffer[offset++] = c1 >> 18 | 240;\r\n      buffer[offset++] = c1 >> 12 & 63 | 128;\r\n      buffer[offset++] = c1 >> 6 & 63 | 128;\r\n      buffer[offset++] = c1 & 63 | 128;\r\n    } else {\r\n      buffer[offset++] = c1 >> 12 | 224;\r\n      buffer[offset++] = c1 >> 6 & 63 | 128;\r\n      buffer[offset++] = c1 & 63 | 128;\r\n    }\r\n  }\r\n  return offset - start;\r\n};\r\n","// GENERATED FILE. DO NOT EDIT.\r\nvar loader = (function(exports) {\r\n  \"use strict\";\r\n  \r\n  Object.defineProperty(exports, \"__esModule\", {\r\n    value: true\r\n  });\r\n  exports.instantiate = instantiate;\r\n  exports.instantiateSync = instantiateSync;\r\n  exports.instantiateStreaming = instantiateStreaming;\r\n  exports.demangle = demangle;\r\n  exports.default = void 0;\r\n  // Runtime header offsets\r\n  const ID_OFFSET = -8;\r\n  const SIZE_OFFSET = -4; // Runtime ids\r\n  \r\n  const ARRAYBUFFER_ID = 0;\r\n  const STRING_ID = 1; // const ARRAYBUFFERVIEW_ID = 2;\r\n  // Runtime type information\r\n  \r\n  const ARRAYBUFFERVIEW = 1 << 0;\r\n  const ARRAY = 1 << 1;\r\n  const STATICARRAY = 1 << 2; // const SET = 1 << 3;\r\n  // const MAP = 1 << 4;\r\n  \r\n  const VAL_ALIGN_OFFSET = 6; // const VAL_ALIGN = 1 << VAL_ALIGN_OFFSET;\r\n  \r\n  const VAL_SIGNED = 1 << 11;\r\n  const VAL_FLOAT = 1 << 12; // const VAL_NULLABLE = 1 << 13;\r\n  \r\n  const VAL_MANAGED = 1 << 14; // const KEY_ALIGN_OFFSET = 15;\r\n  // const KEY_ALIGN = 1 << KEY_ALIGN_OFFSET;\r\n  // const KEY_SIGNED = 1 << 20;\r\n  // const KEY_FLOAT = 1 << 21;\r\n  // const KEY_NULLABLE = 1 << 22;\r\n  // const KEY_MANAGED = 1 << 23;\r\n  // Array(BufferView) layout\r\n  \r\n  const ARRAYBUFFERVIEW_BUFFER_OFFSET = 0;\r\n  const ARRAYBUFFERVIEW_DATASTART_OFFSET = 4;\r\n  const ARRAYBUFFERVIEW_DATALENGTH_OFFSET = 8;\r\n  const ARRAYBUFFERVIEW_SIZE = 12;\r\n  const ARRAY_LENGTH_OFFSET = 12;\r\n  const ARRAY_SIZE = 16;\r\n  const BIGINT = typeof BigUint64Array !== \"undefined\";\r\n  const THIS = Symbol();\r\n  const STRING_SMALLSIZE = 192; // break-even point in V8\r\n  \r\n  const STRING_CHUNKSIZE = 1024; // mitigate stack overflow\r\n  \r\n  const utf16 = new TextDecoder(\"utf-16le\", {\r\n    fatal: true\r\n  }); // != wtf16\r\n  \r\n  /** Gets a string from memory. */\r\n  \r\n  function getStringImpl(buffer, ptr) {\r\n    let len = new Uint32Array(buffer)[ptr + SIZE_OFFSET >>> 2] >>> 1;\r\n    const wtf16 = new Uint16Array(buffer, ptr, len);\r\n    if (len <= STRING_SMALLSIZE) return String.fromCharCode(...wtf16);\r\n  \r\n    try {\r\n      return utf16.decode(wtf16);\r\n    } catch {\r\n      let str = \"\",\r\n          off = 0;\r\n  \r\n      while (len - off > STRING_CHUNKSIZE) {\r\n        str += String.fromCharCode(...wtf16.subarray(off, off += STRING_CHUNKSIZE));\r\n      }\r\n  \r\n      return str + String.fromCharCode(...wtf16.subarray(off));\r\n    }\r\n  }\r\n  /** Prepares the base module prior to instantiation. */\r\n  \r\n  \r\n  function preInstantiate(imports) {\r\n    const extendedExports = {};\r\n  \r\n    function getString(memory, ptr) {\r\n      if (!memory) return \"<yet unknown>\";\r\n      return getStringImpl(memory.buffer, ptr);\r\n    } // add common imports used by stdlib for convenience\r\n  \r\n  \r\n    const env = imports.env = imports.env || {};\r\n  \r\n    env.abort = env.abort || function abort(msg, file, line, colm) {\r\n      const memory = extendedExports.memory || env.memory; // prefer exported, otherwise try imported\r\n  \r\n      throw Error(`abort: ${getString(memory, msg)} at ${getString(memory, file)}:${line}:${colm}`);\r\n    };\r\n  \r\n    env.trace = env.trace || function trace(msg, n, ...args) {\r\n      const memory = extendedExports.memory || env.memory;\r\n      console.log(`trace: ${getString(memory, msg)}${n ? \" \" : \"\"}${args.slice(0, n).join(\", \")}`);\r\n    };\r\n  \r\n    env.seed = env.seed || Date.now;\r\n    imports.Math = imports.Math || Math;\r\n    imports.Date = imports.Date || Date;\r\n    return extendedExports;\r\n  }\r\n  \r\n  const E_NOEXPORTRUNTIME = \"Operation requires compiling with --exportRuntime\";\r\n  \r\n  const F_NOEXPORTRUNTIME = function () {\r\n    throw Error(E_NOEXPORTRUNTIME);\r\n  };\r\n  /** Prepares the final module once instantiation is complete. */\r\n  \r\n  \r\n  function postInstantiate(extendedExports, instance) {\r\n    const exports = instance.exports;\r\n    const memory = exports.memory;\r\n    const table = exports.table;\r\n  \r\n    const __new = exports.__new || F_NOEXPORTRUNTIME;\r\n  \r\n    const __pin = exports.__pin || F_NOEXPORTRUNTIME;\r\n  \r\n    const __unpin = exports.__unpin || F_NOEXPORTRUNTIME;\r\n  \r\n    const __collect = exports.__collect || F_NOEXPORTRUNTIME;\r\n  \r\n    const __rtti_base = exports.__rtti_base;\r\n    const getRttiCount = __rtti_base ? function (arr) {\r\n      return arr[__rtti_base >>> 2];\r\n    } : F_NOEXPORTRUNTIME;\r\n    extendedExports.__new = __new;\r\n    extendedExports.__pin = __pin;\r\n    extendedExports.__unpin = __unpin;\r\n    extendedExports.__collect = __collect;\r\n    /** Gets the runtime type info for the given id. */\r\n  \r\n    function getInfo(id) {\r\n      const U32 = new Uint32Array(memory.buffer);\r\n      const count = getRttiCount(U32);\r\n      if ((id >>>= 0) >= count) throw Error(`invalid id: ${id}`);\r\n      return U32[(__rtti_base + 4 >>> 2) + id * 2];\r\n    }\r\n    /** Gets and validate runtime type info for the given id for array like objects */\r\n  \r\n  \r\n    function getArrayInfo(id) {\r\n      const info = getInfo(id);\r\n      if (!(info & (ARRAYBUFFERVIEW | ARRAY | STATICARRAY))) throw Error(`not an array: ${id}, flags=${info}`);\r\n      return info;\r\n    }\r\n    /** Gets the runtime base id for the given id. */\r\n  \r\n  \r\n    function getBase(id) {\r\n      const U32 = new Uint32Array(memory.buffer);\r\n      const count = getRttiCount(U32);\r\n      if ((id >>>= 0) >= count) throw Error(`invalid id: ${id}`);\r\n      return U32[(__rtti_base + 4 >>> 2) + id * 2 + 1];\r\n    }\r\n    /** Gets the runtime alignment of a collection's values. */\r\n  \r\n  \r\n    function getValueAlign(info) {\r\n      return 31 - Math.clz32(info >>> VAL_ALIGN_OFFSET & 31); // -1 if none\r\n    }\r\n    /** Gets the runtime alignment of a collection's keys. */\r\n    // function getKeyAlign(info) {\r\n    //   return 31 - Math.clz32((info >>> KEY_ALIGN_OFFSET) & 31); // -1 if none\r\n    // }\r\n  \r\n    /** Allocates a new string in the module's memory and returns its pointer. */\r\n  \r\n  \r\n    function __newString(str) {\r\n      if (str == null) return 0;\r\n      const length = str.length;\r\n  \r\n      const ptr = __new(length << 1, STRING_ID);\r\n  \r\n      const U16 = new Uint16Array(memory.buffer);\r\n  \r\n      for (var i = 0, p = ptr >>> 1; i < length; ++i) U16[p + i] = str.charCodeAt(i);\r\n  \r\n      return ptr;\r\n    }\r\n  \r\n    extendedExports.__newString = __newString;\r\n    /** Reads a string from the module's memory by its pointer. */\r\n  \r\n    function __getString(ptr) {\r\n      if (!ptr) return null;\r\n      const buffer = memory.buffer;\r\n      const id = new Uint32Array(buffer)[ptr + ID_OFFSET >>> 2];\r\n      if (id !== STRING_ID) throw Error(`not a string: ${ptr}`);\r\n      return getStringImpl(buffer, ptr);\r\n    }\r\n  \r\n    extendedExports.__getString = __getString;\r\n    /** Gets the view matching the specified alignment, signedness and floatness. */\r\n  \r\n    function getView(alignLog2, signed, float) {\r\n      const buffer = memory.buffer;\r\n  \r\n      if (float) {\r\n        switch (alignLog2) {\r\n          case 2:\r\n            return new Float32Array(buffer);\r\n  \r\n          case 3:\r\n            return new Float64Array(buffer);\r\n        }\r\n      } else {\r\n        switch (alignLog2) {\r\n          case 0:\r\n            return new (signed ? Int8Array : Uint8Array)(buffer);\r\n  \r\n          case 1:\r\n            return new (signed ? Int16Array : Uint16Array)(buffer);\r\n  \r\n          case 2:\r\n            return new (signed ? Int32Array : Uint32Array)(buffer);\r\n  \r\n          case 3:\r\n            return new (signed ? BigInt64Array : BigUint64Array)(buffer);\r\n        }\r\n      }\r\n  \r\n      throw Error(`unsupported align: ${alignLog2}`);\r\n    }\r\n    /** Allocates a new array in the module's memory and returns its pointer. */\r\n  \r\n  \r\n    function __newArray(id, values) {\r\n      const info = getArrayInfo(id);\r\n      const align = getValueAlign(info);\r\n      const length = values.length;\r\n  \r\n      const buf = __new(length << align, info & STATICARRAY ? id : ARRAYBUFFER_ID);\r\n  \r\n      let result;\r\n  \r\n      if (info & STATICARRAY) {\r\n        result = buf;\r\n      } else {\r\n        __pin(buf);\r\n  \r\n        const arr = __new(info & ARRAY ? ARRAY_SIZE : ARRAYBUFFERVIEW_SIZE, id);\r\n  \r\n        __unpin(buf);\r\n  \r\n        const U32 = new Uint32Array(memory.buffer);\r\n        U32[arr + ARRAYBUFFERVIEW_BUFFER_OFFSET >>> 2] = buf;\r\n        U32[arr + ARRAYBUFFERVIEW_DATASTART_OFFSET >>> 2] = buf;\r\n        U32[arr + ARRAYBUFFERVIEW_DATALENGTH_OFFSET >>> 2] = length << align;\r\n        if (info & ARRAY) U32[arr + ARRAY_LENGTH_OFFSET >>> 2] = length;\r\n        result = arr;\r\n      }\r\n  \r\n      const view = getView(align, info & VAL_SIGNED, info & VAL_FLOAT);\r\n  \r\n      if (info & VAL_MANAGED) {\r\n        for (let i = 0; i < length; ++i) {\r\n          const value = values[i];\r\n          view[(buf >>> align) + i] = value;\r\n        }\r\n      } else {\r\n        view.set(values, buf >>> align);\r\n      }\r\n  \r\n      return result;\r\n    }\r\n  \r\n    extendedExports.__newArray = __newArray;\r\n    /** Gets a live view on an array's values in the module's memory. Infers the array type from RTTI. */\r\n  \r\n    function __getArrayView(arr) {\r\n      const U32 = new Uint32Array(memory.buffer);\r\n      const id = U32[arr + ID_OFFSET >>> 2];\r\n      const info = getArrayInfo(id);\r\n      const align = getValueAlign(info);\r\n      let buf = info & STATICARRAY ? arr : U32[arr + ARRAYBUFFERVIEW_DATASTART_OFFSET >>> 2];\r\n      const length = info & ARRAY ? U32[arr + ARRAY_LENGTH_OFFSET >>> 2] : U32[buf + SIZE_OFFSET >>> 2] >>> align;\r\n      return getView(align, info & VAL_SIGNED, info & VAL_FLOAT).subarray(buf >>>= align, buf + length);\r\n    }\r\n  \r\n    extendedExports.__getArrayView = __getArrayView;\r\n    /** Copies an array's values from the module's memory. Infers the array type from RTTI. */\r\n  \r\n    function __getArray(arr) {\r\n      const input = __getArrayView(arr);\r\n  \r\n      const len = input.length;\r\n      const out = new Array(len);\r\n  \r\n      for (let i = 0; i < len; i++) out[i] = input[i];\r\n  \r\n      return out;\r\n    }\r\n  \r\n    extendedExports.__getArray = __getArray;\r\n    /** Copies an ArrayBuffer's value from the module's memory. */\r\n  \r\n    function __getArrayBuffer(ptr) {\r\n      const buffer = memory.buffer;\r\n      const length = new Uint32Array(buffer)[ptr + SIZE_OFFSET >>> 2];\r\n      return buffer.slice(ptr, ptr + length);\r\n    }\r\n  \r\n    extendedExports.__getArrayBuffer = __getArrayBuffer;\r\n    /** Copies a typed array's values from the module's memory. */\r\n  \r\n    function getTypedArray(Type, alignLog2, ptr) {\r\n      return new Type(getTypedArrayView(Type, alignLog2, ptr));\r\n    }\r\n    /** Gets a live view on a typed array's values in the module's memory. */\r\n  \r\n  \r\n    function getTypedArrayView(Type, alignLog2, ptr) {\r\n      const buffer = memory.buffer;\r\n      const U32 = new Uint32Array(buffer);\r\n      const bufPtr = U32[ptr + ARRAYBUFFERVIEW_DATASTART_OFFSET >>> 2];\r\n      return new Type(buffer, bufPtr, U32[bufPtr + SIZE_OFFSET >>> 2] >>> alignLog2);\r\n    }\r\n    /** Attach a set of get TypedArray and View functions to the exports. */\r\n  \r\n  \r\n    function attachTypedArrayFunctions(ctor, name, align) {\r\n      extendedExports[`__get${name}`] = getTypedArray.bind(null, ctor, align);\r\n      extendedExports[`__get${name}View`] = getTypedArrayView.bind(null, ctor, align);\r\n    }\r\n  \r\n    [Int8Array, Uint8Array, Uint8ClampedArray, Int16Array, Uint16Array, Int32Array, Uint32Array, Float32Array, Float64Array].forEach(ctor => {\r\n      attachTypedArrayFunctions(ctor, ctor.name, 31 - Math.clz32(ctor.BYTES_PER_ELEMENT));\r\n    });\r\n  \r\n    if (BIGINT) {\r\n      [BigUint64Array, BigInt64Array].forEach(ctor => {\r\n        attachTypedArrayFunctions(ctor, ctor.name.slice(3), 3);\r\n      });\r\n    }\r\n    /** Tests whether an object is an instance of the class represented by the specified base id. */\r\n  \r\n  \r\n    function __instanceof(ptr, baseId) {\r\n      const U32 = new Uint32Array(memory.buffer);\r\n      let id = U32[ptr + ID_OFFSET >>> 2];\r\n  \r\n      if (id <= getRttiCount(U32)) {\r\n        do {\r\n          if (id == baseId) return true;\r\n          id = getBase(id);\r\n        } while (id);\r\n      }\r\n  \r\n      return false;\r\n    }\r\n  \r\n    extendedExports.__instanceof = __instanceof; // Pull basic exports to extendedExports so code in preInstantiate can use them\r\n  \r\n    extendedExports.memory = extendedExports.memory || memory;\r\n    extendedExports.table = extendedExports.table || table; // Demangle exports and provide the usual utility on the prototype\r\n  \r\n    return demangle(exports, extendedExports);\r\n  }\r\n  \r\n  function isResponse(src) {\r\n    return typeof Response !== \"undefined\" && src instanceof Response;\r\n  }\r\n  \r\n  function isModule(src) {\r\n    return src instanceof WebAssembly.Module;\r\n  }\r\n  /** Asynchronously instantiates an AssemblyScript module from anything that can be instantiated. */\r\n  \r\n  \r\n  async function instantiate(source, imports = {}) {\r\n    if (isResponse(source = await source)) return instantiateStreaming(source, imports);\r\n    const module = isModule(source) ? source : await WebAssembly.compile(source);\r\n    const extended = preInstantiate(imports);\r\n    const instance = await WebAssembly.instantiate(module, imports);\r\n    const exports = postInstantiate(extended, instance);\r\n    return {\r\n      module,\r\n      instance,\r\n      exports\r\n    };\r\n  }\r\n  /** Synchronously instantiates an AssemblyScript module from a WebAssembly.Module or binary buffer. */\r\n  \r\n  \r\n  function instantiateSync(source, imports = {}) {\r\n    const module = isModule(source) ? source : new WebAssembly.Module(source);\r\n    const extended = preInstantiate(imports);\r\n    const instance = new WebAssembly.Instance(module, imports);\r\n    const exports = postInstantiate(extended, instance);\r\n    return {\r\n      module,\r\n      instance,\r\n      exports\r\n    };\r\n  }\r\n  /** Asynchronously instantiates an AssemblyScript module from a response, i.e. as obtained by `fetch`. */\r\n  \r\n  \r\n  async function instantiateStreaming(source, imports = {}) {\r\n    if (!WebAssembly.instantiateStreaming) {\r\n      return instantiate(isResponse(source = await source) ? source.arrayBuffer() : source, imports);\r\n    }\r\n  \r\n    const extended = preInstantiate(imports);\r\n    const result = await WebAssembly.instantiateStreaming(source, imports);\r\n    const exports = postInstantiate(extended, result.instance);\r\n    return { ...result,\r\n      exports\r\n    };\r\n  }\r\n  /** Demangles an AssemblyScript module's exports to a friendly object structure. */\r\n  \r\n  \r\n  function demangle(exports, extendedExports = {}) {\r\n    const setArgumentsLength = exports[\"__argumentsLength\"] ? length => {\r\n      exports[\"__argumentsLength\"].value = length;\r\n    } : exports[\"__setArgumentsLength\"] || exports[\"__setargc\"] || (() => {\r\n      /* nop */\r\n    });\r\n  \r\n    for (let internalName in exports) {\r\n      if (!Object.prototype.hasOwnProperty.call(exports, internalName)) continue;\r\n      const elem = exports[internalName];\r\n      let parts = internalName.split(\".\");\r\n      let curr = extendedExports;\r\n  \r\n      while (parts.length > 1) {\r\n        let part = parts.shift();\r\n        if (!Object.prototype.hasOwnProperty.call(curr, part)) curr[part] = {};\r\n        curr = curr[part];\r\n      }\r\n  \r\n      let name = parts[0];\r\n      let hash = name.indexOf(\"#\");\r\n  \r\n      if (hash >= 0) {\r\n        const className = name.substring(0, hash);\r\n        const classElem = curr[className];\r\n  \r\n        if (typeof classElem === \"undefined\" || !classElem.prototype) {\r\n          const ctor = function (...args) {\r\n            return ctor.wrap(ctor.prototype.constructor(0, ...args));\r\n          };\r\n  \r\n          ctor.prototype = {\r\n            valueOf() {\r\n              return this[THIS];\r\n            }\r\n  \r\n          };\r\n  \r\n          ctor.wrap = function (thisValue) {\r\n            return Object.create(ctor.prototype, {\r\n              [THIS]: {\r\n                value: thisValue,\r\n                writable: false\r\n              }\r\n            });\r\n          };\r\n  \r\n          if (classElem) Object.getOwnPropertyNames(classElem).forEach(name => Object.defineProperty(ctor, name, Object.getOwnPropertyDescriptor(classElem, name)));\r\n          curr[className] = ctor;\r\n        }\r\n  \r\n        name = name.substring(hash + 1);\r\n        curr = curr[className].prototype;\r\n  \r\n        if (/^(get|set):/.test(name)) {\r\n          if (!Object.prototype.hasOwnProperty.call(curr, name = name.substring(4))) {\r\n            let getter = exports[internalName.replace(\"set:\", \"get:\")];\r\n            let setter = exports[internalName.replace(\"get:\", \"set:\")];\r\n            Object.defineProperty(curr, name, {\r\n              get() {\r\n                return getter(this[THIS]);\r\n              },\r\n  \r\n              set(value) {\r\n                setter(this[THIS], value);\r\n              },\r\n  \r\n              enumerable: true\r\n            });\r\n          }\r\n        } else {\r\n          if (name === 'constructor') {\r\n            (curr[name] = (...args) => {\r\n              setArgumentsLength(args.length);\r\n              return elem(...args);\r\n            }).original = elem;\r\n          } else {\r\n            // instance method\r\n            (curr[name] = function (...args) {\r\n              // !\r\n              setArgumentsLength(args.length);\r\n              return elem(this[THIS], ...args);\r\n            }).original = elem;\r\n          }\r\n        }\r\n      } else {\r\n        if (/^(get|set):/.test(name)) {\r\n          if (!Object.prototype.hasOwnProperty.call(curr, name = name.substring(4))) {\r\n            Object.defineProperty(curr, name, {\r\n              get: exports[internalName.replace(\"set:\", \"get:\")],\r\n              set: exports[internalName.replace(\"get:\", \"set:\")],\r\n              enumerable: true\r\n            });\r\n          }\r\n        } else if (typeof elem === \"function\" && elem !== setArgumentsLength) {\r\n          (curr[name] = (...args) => {\r\n            setArgumentsLength(args.length);\r\n            return elem(...args);\r\n          }).original = elem;\r\n        } else {\r\n          curr[name] = elem;\r\n        }\r\n      }\r\n    }\r\n  \r\n    return extendedExports;\r\n  }\r\n  \r\n  var _default = {\r\n    instantiate,\r\n    instantiateSync,\r\n    instantiateStreaming,\r\n    demangle\r\n  };\r\n  exports.default = _default;\r\n  return exports;\r\n})({});\r\nif (typeof define === 'function' && define.amd) define([], function() { return loader; });\r\nelse if (typeof module === 'object' && typeof exports==='object') module.exports = loader;\r\n","// GENERATED FILE. DO NOT EDIT.\r\nvar rtrace = (function(exports) {\r\n  \"use strict\";\r\n  \r\n  Object.defineProperty(exports, \"__esModule\", {\r\n    value: true\r\n  });\r\n  exports.default = exports.Rtrace = exports.TOTAL_OVERHEAD = exports.OBJECT_OVERHEAD = exports.BLOCK_OVERHEAD = void 0;\r\n  // WebAssembly pages are 65536 kb\r\n  const PAGE_SIZE_BITS = 16;\r\n  const PAGE_SIZE = 1 << PAGE_SIZE_BITS;\r\n  const PAGE_MASK = PAGE_SIZE - 1; // Wasm32 pointer size is 4 bytes\r\n  \r\n  const PTR_SIZE_BITS = 2;\r\n  const PTR_SIZE = 1 << PTR_SIZE_BITS;\r\n  const PTR_MASK = PTR_SIZE - 1;\r\n  const PTR_VIEW = Uint32Array;\r\n  const BLOCK_OVERHEAD = PTR_SIZE;\r\n  exports.BLOCK_OVERHEAD = BLOCK_OVERHEAD;\r\n  const OBJECT_OVERHEAD = 16;\r\n  exports.OBJECT_OVERHEAD = OBJECT_OVERHEAD;\r\n  const TOTAL_OVERHEAD = BLOCK_OVERHEAD + OBJECT_OVERHEAD;\r\n  exports.TOTAL_OVERHEAD = TOTAL_OVERHEAD;\r\n  \r\n  function assert(x) {\r\n    if (!x) throw Error(\"assertion failed\");\r\n    return x;\r\n  }\r\n  \r\n  Error.stackTraceLimit = 15;\r\n  \r\n  function trimStacktrace(stack, levels) {\r\n    return stack.split(/\\r?\\n/).slice(1 + levels);\r\n  }\r\n  \r\n  const hrtime = typeof performance !== \"undefined\" && performance.now ? performance.now : typeof process !== \"undefined\" && process.hrtime ? () => {\r\n    let t = process.hrtime();\r\n    return t[0] * 1e3 + t[1] / 1e6;\r\n  } : Date.now;\r\n  const mmTagsToString = [\"\", \"FREE\", \"LEFTFREE\", \"FREE+LEFTFREE\"];\r\n  const gcColorToString = [\"BLACK/WHITE\", \"WHITE/BLACK\", \"GRAY\", \"INVALID\"];\r\n  \r\n  class Rtrace {\r\n    constructor(options) {\r\n      this.options = options || {};\r\n  \r\n      this.onerror = this.options.onerror || function () {\r\n        /* nop */\r\n      };\r\n  \r\n      this.oninfo = this.options.oninfo || function () {\r\n        /* nop */\r\n      };\r\n  \r\n      this.oncollect_ = this.options.oncollect || function () {\r\n        /* nop */\r\n      };\r\n  \r\n      this.memory = null;\r\n      this.shadow = null;\r\n      this.shadowStart = 0x100000000;\r\n      this.blocks = new Map();\r\n      this.allocSites = new Map();\r\n      this.freedBlocks = new Map();\r\n      this.gcProfileStart = 0;\r\n      this.gcProfile = [];\r\n      this.allocCount = 0;\r\n      this.resizeCount = 0;\r\n      this.moveCount = 0;\r\n      this.freeCount = 0;\r\n      this.heapBase = 0x100000000;\r\n    }\r\n  \r\n    install(imports) {\r\n      if (!imports) imports = {};\r\n      imports.rtrace = Object.assign(imports.rtrace || {}, {\r\n        oninit: this.oninit.bind(this),\r\n        onalloc: this.onalloc.bind(this),\r\n        onresize: this.onresize.bind(this),\r\n        onmove: this.onmove.bind(this),\r\n        onvisit: this.onvisit.bind(this),\r\n        onfree: this.onfree.bind(this),\r\n        oninterrupt: this.oninterrupt.bind(this),\r\n        onyield: this.onyield.bind(this),\r\n        oncollect: this.oncollect.bind(this),\r\n        onstore: this.onstore.bind(this),\r\n        onload: this.onload.bind(this)\r\n      });\r\n      return imports;\r\n    }\r\n    /** Synchronizes the shadow memory with the module's memory. */\r\n  \r\n  \r\n    syncShadow() {\r\n      if (!this.memory) {\r\n        this.memory = assert(this.options.getMemory());\r\n        this.shadow = new WebAssembly.Memory({\r\n          initial: (this.memory.buffer.byteLength + PAGE_MASK & ~PAGE_MASK) >>> PAGE_SIZE_BITS\r\n        });\r\n      } else {\r\n        var diff = this.memory.buffer.byteLength - this.shadow.buffer.byteLength;\r\n        if (diff > 0) this.shadow.grow(diff >>> 16);\r\n      }\r\n    }\r\n    /** Marks a block's presence in shadow memory. */\r\n  \r\n  \r\n    markShadow(info, oldSize = 0) {\r\n      assert(this.shadow && this.shadow.byteLength == this.memory.byteLength);\r\n      assert((info.size & PTR_MASK) == 0);\r\n  \r\n      if (info.ptr < this.shadowStart) {\r\n        this.shadowStart = info.ptr;\r\n      }\r\n  \r\n      var len = info.size >>> PTR_SIZE_BITS;\r\n      var view = new PTR_VIEW(this.shadow.buffer, info.ptr, len);\r\n      var errored = false;\r\n      var start = oldSize >>> PTR_SIZE_BITS;\r\n  \r\n      for (let i = 0; i < start; ++i) {\r\n        if (view[i] != info.ptr && !errored) {\r\n          this.onerror(Error(\"shadow region mismatch: \" + view[i] + \" != \" + info.ptr), info);\r\n          errored = true;\r\n        }\r\n      }\r\n  \r\n      errored = false;\r\n  \r\n      for (let i = start; i < len; ++i) {\r\n        if (view[i] != 0 && !errored) {\r\n          this.onerror(Error(\"shadow region already in use: \" + view[i] + \" != 0\"), info);\r\n          errored = true;\r\n        }\r\n  \r\n        view[i] = info.ptr;\r\n      }\r\n    }\r\n    /** Unmarks a block's presence in shadow memory. */\r\n  \r\n  \r\n    unmarkShadow(info, oldSize = info.size) {\r\n      assert(this.shadow && this.shadow.byteLength == this.memory.byteLength);\r\n      var len = oldSize >>> PTR_SIZE_BITS;\r\n      var view = new PTR_VIEW(this.shadow.buffer, info.ptr, len);\r\n      var errored = false;\r\n      var start = 0;\r\n  \r\n      if (oldSize != info.size) {\r\n        assert(oldSize > info.size);\r\n        start = info.size >>> PTR_SIZE_BITS;\r\n      }\r\n  \r\n      for (let i = 0; i < len; ++i) {\r\n        if (view[i] != info.ptr && !errored) {\r\n          this.onerror(Error(\"shadow region mismatch: \" + view[i] + \" != \" + info.ptr), info);\r\n          errored = true;\r\n        }\r\n  \r\n        if (i >= start) view[i] = 0;\r\n      }\r\n    }\r\n    /** Performs an access to shadow memory. */\r\n  \r\n  \r\n    accessShadow(ptr, size, isLoad, isRT) {\r\n      this.syncShadow();\r\n      if (ptr < this.shadowStart) return;\r\n      var value = new Uint32Array(this.shadow.buffer, ptr & ~PTR_MASK, 1)[0];\r\n      if (value != 0) return;\r\n  \r\n      if (!isRT) {\r\n        let stack = trimStacktrace(new Error().stack, 2);\r\n        this.onerror(new Error(\"OOB \" + (isLoad ? \"load\" : \"store\") + 8 * size + \" at address \" + ptr + \"\\n\" + stack.join(\"\\n\")));\r\n      }\r\n    }\r\n    /** Obtains information about a block. */\r\n  \r\n  \r\n    getBlockInfo(ptr) {\r\n      const [mmInfo, gcInfo, gcInfo2, rtId, rtSize] = new Uint32Array(this.memory.buffer, ptr, 5);\r\n      const size = mmInfo & ~3;\r\n      return {\r\n        ptr,\r\n        size: BLOCK_OVERHEAD + size,\r\n        // total incl. overhead\r\n        mmInfo: {\r\n          tags: mmTagsToString[mmInfo & 3],\r\n          size: size // as stored excl. overhead\r\n  \r\n        },\r\n        gcInfo: {\r\n          color: gcColorToString[gcInfo & 3],\r\n          next: gcInfo & ~3,\r\n          prev: gcInfo2\r\n        },\r\n        rtId,\r\n        rtSize\r\n      };\r\n    }\r\n    /** Checks if rtrace is active, i.e. at least one event has occurred. */\r\n  \r\n  \r\n    get active() {\r\n      return Boolean(this.allocCount || this.resizeCount || this.moveCount || this.freeCount);\r\n    }\r\n    /** Checks if there are any leaks and emits them via `oninfo`. Returns the number of live blocks. */\r\n  \r\n  \r\n    check() {\r\n      if (this.oninfo) {\r\n        for (let [ptr, info] of this.blocks) {\r\n          this.oninfo(\"LIVE \" + ptr + \"\\n\" + info.allocStack.join(\"\\n\"));\r\n        }\r\n      }\r\n  \r\n      return this.blocks.size;\r\n    } // Runtime instrumentation\r\n  \r\n  \r\n    oninit(heapBase) {\r\n      this.heapBase = heapBase;\r\n      this.gcProfileStart = 0;\r\n      this.gcProfile.length = 0;\r\n      this.oninfo(\"INIT heapBase=\" + heapBase);\r\n    }\r\n  \r\n    onalloc(ptr) {\r\n      this.syncShadow();\r\n      ++this.allocCount;\r\n      var info = this.getBlockInfo(ptr);\r\n  \r\n      if (this.blocks.has(ptr)) {\r\n        this.onerror(Error(\"duplicate alloc: \" + ptr), info);\r\n      } else {\r\n        this.oninfo(\"ALLOC \" + ptr + \"..\" + (ptr + info.size));\r\n        this.markShadow(info);\r\n        let allocStack = trimStacktrace(new Error().stack, 1); // strip onalloc\r\n  \r\n        this.blocks.set(ptr, Object.assign(info, {\r\n          allocStack\r\n        }));\r\n      }\r\n    }\r\n  \r\n    onresize(ptr, oldSize) {\r\n      this.syncShadow();\r\n      ++this.resizeCount;\r\n      const info = this.getBlockInfo(ptr);\r\n  \r\n      if (!this.blocks.has(ptr)) {\r\n        this.onerror(Error(\"orphaned resize: \" + ptr), info);\r\n      } else {\r\n        const beforeInfo = this.blocks.get(ptr);\r\n  \r\n        if (beforeInfo.size != oldSize) {\r\n          this.onerror(Error(`size mismatch upon resize: ${ptr} (${beforeInfo.size} != ${oldSize})`), info);\r\n        }\r\n  \r\n        const newSize = info.size;\r\n        this.oninfo(\"RESIZE \" + ptr + \"..\" + (ptr + newSize) + \" (\" + oldSize + \"->\" + newSize + \")\");\r\n        this.blocks.set(ptr, Object.assign(info, {\r\n          allocStack: beforeInfo.allocStack\r\n        }));\r\n  \r\n        if (newSize > oldSize) {\r\n          this.markShadow(info, oldSize);\r\n        } else if (newSize < oldSize) {\r\n          this.unmarkShadow(info, oldSize);\r\n        }\r\n      }\r\n    }\r\n  \r\n    onmove(oldPtr, newPtr) {\r\n      this.syncShadow();\r\n      ++this.moveCount;\r\n      var oldInfo = this.getBlockInfo(oldPtr);\r\n      var newInfo = this.getBlockInfo(newPtr);\r\n  \r\n      if (!this.blocks.has(oldPtr)) {\r\n        this.onerror(Error(\"orphaned move (old): \" + oldPtr), oldInfo);\r\n      } else {\r\n        if (!this.blocks.has(newPtr)) {\r\n          this.onerror(Error(\"orphaned move (new): \" + newPtr), newInfo);\r\n        } else {\r\n          const beforeInfo = this.blocks.get(oldPtr);\r\n          const oldSize = oldInfo.size;\r\n          const newSize = newInfo.size;\r\n  \r\n          if (beforeInfo.size != oldSize) {\r\n            this.onerror(Error(`size mismatch upon move: ${oldPtr} (${beforeInfo.size} != ${oldSize})`), oldInfo);\r\n          }\r\n  \r\n          this.oninfo(\"MOVE \" + oldPtr + \"..\" + (oldPtr + oldSize) + \" -> \" + newPtr + \"..\" + (newPtr + newSize)); // calls new alloc before and old free after\r\n        }\r\n      }\r\n    }\r\n  \r\n    onvisit(ptr) {\r\n      // Indicates that a block has been freed but it still visited by the GC\r\n      if (ptr > this.heapBase && !this.blocks.has(ptr)) {\r\n        let err = Error(\"orphaned visit: \" + ptr);\r\n        let info = this.freedBlocks.get(ptr);\r\n  \r\n        if (info) {\r\n          err.stack += \"\\n^ allocated at:\\n\" + info.allocStack.join(\"\\n\");\r\n          err.stack += \"\\n^ freed at:\\n\" + info.freeStack.join(\"\\n\");\r\n        }\r\n  \r\n        this.onerror(err, null);\r\n        return false;\r\n      }\r\n  \r\n      return true;\r\n    }\r\n  \r\n    onfree(ptr) {\r\n      this.syncShadow();\r\n      ++this.freeCount;\r\n      var info = this.getBlockInfo(ptr);\r\n  \r\n      if (!this.blocks.has(ptr)) {\r\n        this.onerror(Error(\"orphaned free: \" + ptr), info);\r\n      } else {\r\n        const oldInfo = this.blocks.get(ptr);\r\n  \r\n        if (info.size != oldInfo.size) {\r\n          this.onerror(Error(`size mismatch upon free: ${ptr} (${oldInfo.size} != ${info.size})`), info);\r\n        }\r\n  \r\n        this.oninfo(\"FREE \" + ptr + \"..\" + (ptr + info.size));\r\n        this.unmarkShadow(info);\r\n        const allocInfo = this.blocks.get(ptr);\r\n        this.blocks.delete(ptr);\r\n        const allocStack = allocInfo.allocStack;\r\n        const freeStack = trimStacktrace(new Error().stack, 1); // strip onfree\r\n        // (not much) TODO: Maintaining these is essentially a memory leak\r\n  \r\n        this.freedBlocks.set(ptr, {\r\n          allocStack,\r\n          freeStack\r\n        });\r\n      }\r\n    }\r\n  \r\n    oncollect(total) {\r\n      this.oninfo(`COLLECT at ${total}`);\r\n      this.plot(total);\r\n      this.oncollect_();\r\n    } // GC profiling\r\n  \r\n  \r\n    plot(total, pause = 0) {\r\n      if (!this.gcProfileStart) this.gcProfileStart = Date.now();\r\n      this.gcProfile.push([Date.now() - this.gcProfileStart, total, pause]);\r\n    }\r\n  \r\n    oninterrupt(total) {\r\n      this.interruptStart = hrtime();\r\n      this.plot(total);\r\n    }\r\n  \r\n    onyield(total) {\r\n      var pause = hrtime() - this.interruptStart;\r\n      if (pause >= 1) console.log(\"interrupted for \" + pause.toFixed(1) + \"ms\");\r\n      this.plot(total, pause);\r\n    } // Memory instrumentation\r\n  \r\n  \r\n    onstore(ptr, offset, bytes, isRT) {\r\n      this.accessShadow(ptr + offset, bytes, false, isRT);\r\n      return ptr;\r\n    }\r\n  \r\n    onload(ptr, offset, bytes, isRT) {\r\n      this.accessShadow(ptr + offset, bytes, true, isRT);\r\n      return ptr;\r\n    }\r\n  \r\n  }\r\n  \r\n  exports.Rtrace = Rtrace;\r\n  var _default = {\r\n    Rtrace\r\n  };\r\n  exports.default = _default;\r\n  return exports;\r\n})({});\r\nif (typeof define === 'function' && define.amd) define([], function() { return rtrace; });\r\nelse if (typeof module === 'object' && typeof exports==='object') module.exports = rtrace;\r\n","if(typeof __WEBPACK_EXTERNAL_MODULE__525__ === 'undefined') { var e = new Error(\"Cannot find module 'assemblyscript'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE__525__;","module.exports = __WEBPACK_EXTERNAL_MODULE__911__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(469);\n"],"sourceRoot":""}